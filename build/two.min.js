/*

 lodash 3.3.0 (Custom Build) <https://lodash.com/>
 Build: `lodash modern -o ./lodash.js`
 Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>
 Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 Available under MIT license <https://lodash.com/license>
*/
(function(){function k(a,f){if(a!==f){var j=a===a,e=f===f;if(a>f||!j||"undefined"==typeof a&&e)return 1;if(a<f||!e||"undefined"==typeof f&&j)return-1}return 0}function y(a,f,j){if(f!==f)return w(a,j);j=(j||0)-1;for(var e=a.length;++j<e;)if(a[j]===f)return j;return-1}function s(a){return"function"==typeof a||!1}function t(a,f){var j=a.length;for(a.sort(f);j--;)a[j]=a[j].value;return a}function g(a){return"string"==typeof a?a:null==a?"":a+""}function a(a){return a.charCodeAt(0)}function e(a,f){for(var j=
-1,e=a.length;++j<e&&-1<f.indexOf(a.charAt(j)););return j}function q(a,f){for(var j=a.length;j--&&-1<f.indexOf(a.charAt(j)););return j}function l(a,f){return k(a.criteria,f.criteria)||a.index-f.index}function m(a,f){for(var j=-1,e=a.criteria,r=f.criteria,h=e.length;++j<h;){var p=k(e[j],r[j]);if(p)return p}return a.index-f.index}function A(a){return Db[a]}function na(a){return Eb[a]}function B(a){return"\\"+Fb[a]}function w(a,f,j){var e=a.length;for(f=j?f||e:(f||0)-1;j?f--:++f<e;){var r=a[f];if(r!==
r)return f}return-1}function u(a){return a&&"object"==typeof a||!1}function h(a){return 160>=a&&9<=a&&13>=a||32==a||160==a||5760==a||6158==a||8192<=a&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function z(a,f){for(var j=-1,e=a.length,r=-1,h=[];++j<e;)a[j]===f&&(a[j]=Gb,h[++r]=j);return h}function x(a){for(var f=-1,j=a.length;++f<j&&h(a.charCodeAt(f)););return f}function ca(a){for(var f=a.length;f--&&h(a.charCodeAt(f)););return f}function D(a){return Hb[a]}function K(h){function f(b){if(u(b)&&
!E(b)&&!(b instanceof I)){if(b instanceof T)return b;if(P.call(b,"__chain__")&&P.call(b,"__wrapped__"))return Fc(b)}return new T(b)}function $(){}function T(b,c,d){this.__wrapped__=b;this.__actions__=d||[];this.__chain__=!!c}function I(b){this.__wrapped__=b;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=!1;this.__iteratees__=null;this.__takeCount__=Ib;this.__views__=null}function ma(){this.__data__={}}function Ec(b){var c=b?b.length:0;for(this.data={hash:ab(null),set:new bb};c--;)this.push(b[c])}
function cb(b,c){var d=b.data;return("string"==typeof c||Q(c)?d.set.has(c):d.hash[c])?0:-1}function W(b,c){var d=-1,n=b.length;for(c||(c=J(n));++d<n;)c[d]=b[d];return c}function ia(b,c){for(var d=-1,n=b.length;++d<n&&!1!==c(b[d],d,b););return b}function Jb(b,c){for(var d=-1,n=b.length;++d<n;)if(!c(b[d],d,b))return!1;return!0}function Gc(b,c){for(var d=-1,n=b.length,v=-1,a=[];++d<n;){var f=b[d];c(f,d,b)&&(a[++v]=f)}return a}function db(b,c){for(var d=-1,n=b.length,v=J(n);++d<n;)v[d]=c(b[d],d,b);return v}
function Hc(b){for(var c=-1,d=b.length,n=Ic;++c<d;){var v=b[c];v>n&&(n=v)}return n}function Db(b,c,d,n){var v=-1,a=b.length;for(n&&a&&(d=b[++v]);++v<a;)d=c(d,b[v],v,b);return d}function Eb(b,c,d,n){var v=b.length;for(n&&v&&(d=b[--v]);v--;)d=c(d,b[v],v,b);return d}function Fb(b,c){for(var d=-1,n=b.length;++d<n;)if(c(b[d],d,b))return!0;return!1}function Hb(b,c){return"undefined"==typeof b?c:b}function Jc(b,c,d,n){return"undefined"==typeof b||!P.call(n,d)?c:b}function Pa(b,c,d){var n=R(c);if(!d)return eb(c,
b,n);for(var v=-1,a=n.length;++v<a;){var f=n[v],j=b[f],e=d(j,c[f],f,b,c);if((e===e?e!==j:j===j)||"undefined"==typeof j&&!(f in b))b[f]=e}return b}function Kc(b,c){for(var d=-1,n=b.length,v=N(n),a=c.length,f=J(a);++d<a;){var j=c[d];v?(j=parseFloat(j),f[d]=Ba(j,n)?b[j]:C):f[d]=b[j]}return f}function eb(b,c,d){d||(d=c,c={});for(var n=-1,v=d.length;++n<v;){var a=d[n];c[a]=b[a]}return c}function Ca(b,c,d){var n=typeof b;if("function"==n){if(n="undefined"!=typeof c){var n=f.support,v=!(n.funcNames?b.name:
n.funcDecomp);if(!v){var a=Lc.call(b);n.funcNames||(v=!be.test(a));v||(v=Mc.test(a)||X(b),Kb(b,v))}n=v}return n?Y(b,c,d):b}return null==b?wa:"object"==n?Qa(b):"undefined"==typeof c?Da(b+""):Nc(b+"",c)}function Ra(b,c,d,n,v,a,f){var j;d&&(j=v?d(b,n,v):d(b));if("undefined"!=typeof j)return j;if(!Q(b))return b;if(n=E(b)){v=b.length;var e=new b.constructor(v);v&&("string"==typeof b[0]&&P.call(b,"index"))&&(e.index=b.index,e.input=b.input);j=e;if(!c)return W(b,j)}else{var e=U.call(b),h=e==Sa;if(e==ja||
e==Ea||h&&!v){if(v=(h?{}:b).constructor,"function"==typeof v&&v instanceof v||(v=sa),j=new v,!c)return eb(b,j,R(b))}else return L[e]?ce(b,e,c):v?b:{}}a||(a=[]);f||(f=[]);for(v=a.length;v--;)if(a[v]==b)return f[v];a.push(b);f.push(j);(n?ia:ra)(b,function(n,v){j[v]=Ra(n,c,d,v,b,a,f)});return j}function Oc(b,c,d,n){if("function"!=typeof b)throw new ka(la);return fb(function(){b.apply(C,V(d,n))},c)}function Ta(b,c){var d=b?b.length:0,n=[];if(!d)return n;var v=-1,a=Fa(),f=a==y,j=f&&200<=c.length&&Lb(c),
e=c.length;j&&(a=cb,f=!1,c=j);a:for(;++v<d;)if(j=b[v],f&&j===j){for(var h=e;h--;)if(c[h]===j)continue a;n.push(j)}else 0>a(c,j)&&n.push(j);return n}function da(b,c){var d=b?b.length:0;if(!N(d))return ra(b,c);for(var n=-1,v=Ua(b);++n<d&&!1!==c(v[n],n,v););return b}function Mb(b,c){var d=b?b.length:0;if(!N(d))return Pc(b,c);for(var n=Ua(b);d--&&!1!==c(n[d],d,n););return b}function de(b,c){var d=!0;da(b,function(b,v,a){return d=!!c(b,v,a)});return d}function Qc(b,c){var d=[];da(b,function(b,v,a){c(b,
v,a)&&d.push(b)});return d}function gb(b,c,d,n){var v;d(b,function(b,d,a){if(c(b,d,a))return v=n?d:b,!1});return v}function ea(b,c,d,n){n=(n||0)-1;for(var v=b.length,a=-1,f=[];++n<v;){var j=b[n];if(u(j)&&N(j.length)&&(E(j)||oa(j))){c&&(j=ea(j,c,d));var e=-1,h=j.length;for(f.length+=h;++e<h;)f[++a]=j[e]}else d||(f[++a]=j)}return f}function hb(b,c,d){var n=-1,v=Ua(b);d=d(b);for(var a=d.length;++n<a;){var f=d[n];if(!1===c(v[f],f,v))break}return b}function Nb(b,c,d){var n=Ua(b);d=d(b);for(var v=d.length;v--;){var a=
d[v];if(!1===c(n[a],a,n))break}return b}function ra(b,c){return hb(b,c,R)}function Pc(b,c){return Nb(b,c,R)}function Ob(b,c){for(var d=-1,n=c.length,v=-1,a=[];++d<n;){var f=c[d];Ga(b[f])&&(a[++v]=f)}return a}function ib(b,c,d,n,v,a){if(b===c)return 0!==b||1/b==1/c;var f=typeof b,j=typeof c;if("function"!=f&&"object"!=f&&"function"!=j&&"object"!=j||null==b||null==c)return b!==b&&c!==c;a:{var f=ib,j=E(b),e=E(c),h=Va,r=Va;j||(h=U.call(b),h==Ea?h=ja:h!=ja&&(j=Ha(b)));e||(r=U.call(c),r==Ea?r=ja:r!=ja&&
Ha(c));var p=h==ja,e=r==ja;if((r=h==r)&&!j&&!p)b=ee(b,c,h);else if(h=p&&P.call(b,"__wrapped__"),e=e&&P.call(c,"__wrapped__"),h||e)b=f(h?b.value():b,e?c.value():c,d,n,v,a);else if(r){v||(v=[]);a||(a=[]);for(h=v.length;h--;)if(v[h]==b){b=a[h]==c;break a}v.push(b);a.push(c);b=(j?fe:ge)(b,c,f,d,n,v,a);v.pop();a.pop()}else b=!1}return b}function Rc(b,c,d,n,v){var a=c.length;if(null==b)return!a;for(var f=-1,j=!v;++f<a;)if(j&&n[f]?d[f]!==b[c[f]]:!P.call(b,c[f]))return!1;for(f=-1;++f<a;){var e=c[f];if(j&&
n[f])e=P.call(b,e);else{var h=b[e],r=d[f],e=v?v(h,r,e):C;"undefined"==typeof e&&(e=ib(r,h,v,!0))}if(!e)return!1}return!0}function he(b,c){var d=[];da(b,function(b,a,f){d.push(c(b,a,f))});return d}function Qa(b){var c=R(b),d=c.length;if(1==d){var n=c[0],a=b[n];if(xa(a))return function(b){return null!=b&&b[n]===a&&P.call(b,n)}}for(var f=J(d),j=J(d);d--;)a=b[c[d]],f[d]=a,j[d]=xa(a);return function(b){return Rc(b,c,f,j)}}function Nc(b,c){return xa(c)?function(d){return null!=d&&d[b]===c}:function(d){return null!=
d&&ib(c,d[b],null,!0)}}function Sc(b,c,d,n,a){if(!Q(b))return b;var f=N(c.length)&&(E(c)||Ha(c));(f?ia:ra)(c,function(c,j,e){if(u(c)){n||(n=[]);a||(a=[]);a:{c=Sc;for(var h=n,r=a,p=h.length,g=e[j];p--;)if(h[p]==g){b[j]=r[p];j=void 0;break a}p=b[j];e=d?d(p,g,j,b,e):C;var l="undefined"==typeof e;l&&(e=g,N(g.length)&&(E(g)||Ha(g))?e=E(p)?p:p?W(p):[]:jb(g)||oa(g)?e=oa(p)?Tc(p):jb(p)?p:{}:l=!1);h.push(g);r.push(e);if(l)b[j]=c(e,g,d,h,r);else if(e===e?e!==p:p===p)b[j]=e;j=void 0}return j}h=b[j];e=d?d(h,
c,j,b,e):C;(r="undefined"==typeof e)&&(e=c);if((f||"undefined"!=typeof e)&&(r||(e===e?e!==h:h===h)))b[j]=e});return b}function Da(b){return function(c){return null==c?C:c[b]}}function Uc(b,c,d,n,a){a(b,function(b,a,v){d=n?(n=!1,b):c(d,b,a,v)});return d}function V(b,c,d){var n=-1,a=b.length;c=null==c?0:+c||0;0>c&&(c=-c>a?0:a+c);d="undefined"==typeof d||d>a?a:+d||0;0>d&&(d+=a);a=c>d?0:d-c>>>0;c>>>=0;for(d=J(a);++n<a;)d[n]=b[n+c];return d}function ie(b,c){var d;da(b,function(b,a,f){d=c(b,a,f);return!d});
return!!d}function Pb(b,c){var d=-1,n=Fa(),a=b.length,f=n==y,j=f&&200<=a,e=j&&Lb(),h=[];e?(n=cb,f=!1):(j=!1,e=c?[]:h);a:for(;++d<a;){var r=b[d],p=c?c(r,d,b):r;if(f&&r===r){for(var g=e.length;g--;)if(e[g]===p)continue a;c&&e.push(p);h.push(r)}else 0>n(e,p)&&((c||j)&&e.push(p),h.push(r))}return h}function Qb(b,c){for(var d=-1,n=c.length,a=J(n);++d<n;)a[d]=b[c[d]];return a}function Vc(b,c){var d=b;d instanceof I&&(d=d.value());for(var n=-1,a=c.length;++n<a;){var d=[d],f=c[n];Rb.apply(d,f.args);d=f.func.apply(f.thisArg,
d)}return d}function kb(b,c,d){var n=0,a=b?b.length:n;if("number"==typeof c&&c===c&&a<=je){for(;n<a;){var f=n+a>>>1,j=b[f];(d?j<=c:j<c)?n=f+1:a=f}return a}return Sb(b,c,wa,d)}function Sb(b,c,d,n){c=d(c);for(var a=0,f=b?b.length:0,j=c!==c,e="undefined"==typeof c;a<f;){var h=ta((a+f)/2),r=d(b[h]),p=r===r;(j?p||n:e?p&&(n||"undefined"!=typeof r):n?r<=c:r<c)?a=h+1:f=h}return fa(f,ke)}function Y(b,c,d){if("function"!=typeof b)return wa;if("undefined"==typeof c)return b;switch(d){case 1:return function(d){return b.call(c,
d)};case 3:return function(d,a,f){return b.call(c,d,a,f)};case 4:return function(d,a,f,j){return b.call(c,d,a,f,j)};case 5:return function(d,a,f,j,e){return b.call(c,d,a,f,j,e)}}return function(){return b.apply(c,arguments)}}function Tb(b){return lb.call(b,0)}function Wc(b,c,d){for(var n=d.length,a=-1,f=ba(b.length-n,0),j=-1,e=c.length,h=J(f+e);++j<e;)h[j]=c[j];for(;++a<n;)h[d[a]]=b[a];for(;f--;)h[j++]=b[a++];return h}function Xc(b,c,d){for(var n=-1,a=d.length,f=-1,j=ba(b.length-a,0),e=-1,h=c.length,
r=J(j+h);++f<j;)r[f]=b[f];for(j=f;++e<h;)r[j+e]=c[e];for(;++n<a;)r[j+d[n]]=b[f++];return r}function mb(b,c){return function(d,n,a){var f=c?c():{};n=H(n,a,3);if(E(d)){a=-1;for(var j=d.length;++a<j;){var e=d[a];b(f,e,n(e,a,d),d)}}else da(d,function(c,d,a){b(f,c,n(c,d,a),a)});return f}}function Yc(b){return function(){var c=arguments.length,d=arguments[0];if(2>c||null==d)return d;3<c&&F(arguments[1],arguments[2],arguments[3])&&(c=2);if(3<c&&"function"==typeof arguments[c-2])var n=Y(arguments[--c-1],
arguments[c--],5);else 2<c&&"function"==typeof arguments[c-1]&&(n=arguments[--c]);for(var a=0;++a<c;){var f=arguments[a];f&&b(d,f,n)}return d}}function nb(b){return function(c){var d=-1;c=Zc($c(c));for(var n=c.length,a="";++d<n;)a=b(a,c[d],d);return a}}function ob(b){return function(){var c=Ia(b.prototype),d=b.apply(c,arguments);return Q(d)?d:c}}function ad(b,c){return function(d,n,f){f&&F(d,n,f)&&(n=null);var j=H(),e=null==n;j===Ca&&e||(e=!1,n=j(n,f,3));if(e)if(n=E(d),!n&&pb(d))n=a;else return b(n?
d:qb(d));var h=n,r=c?Ib:Ic,p=r,g=p;da(d,function(b,d,n){d=h(b,d,n);if((c?d<p:d>p)||d===r&&d===g)p=d,g=b});return g}}function bd(b,c,d,n,a,f,e,h,g,l){function q(){for(var j=arguments.length,r=j,p=J(j);r--;)p[r]=arguments[r];n&&(p=Wc(p,n,a));f&&(p=Xc(p,f,e));if(A||B){var r=q.placeholder,s=z(p,r),j=j-s.length;if(j<l){var na=h?W(h):null,j=ba(l-j,0),x=A?s:null,s=A?null:s,Z=A?p:null,p=A?null:p;c|=A?G:aa;c&=~(A?aa:G);t||(c&=~(O|ga));p=bd(b,c,d,Z,x,p,s,na,g,j);p.placeholder=r;return p}}r=k?d:this;S&&(b=r[w]);
if(h){na=h;j=p.length;x=fa(na.length,j);for(s=W(p);x--;)Z=na[x],p[x]=Ba(Z,j)?s[Z]:C}m&&g<p.length&&(p.length=g);return(this instanceof q?u||ob(b):b).apply(r,p)}var m=c&Z,k=c&O,S=c&ga,A=c&r,t=c&j,B=c&p,u=!S&&ob(b),w=b;return q}function Ub(b,c,d){b=b.length;c=+c;if(b>=c||!Ja(c))return"";c-=b;d=null==d?" ":d+"";return cd(d,rb(c/d.length)).slice(0,c)}function le(b,c,d,n){function a(){for(var c=-1,e=arguments.length,h=-1,r=n.length,p=J(e+r);++h<r;)p[h]=n[h];for(;e--;)p[h++]=arguments[++c];return(this instanceof
a?j:b).apply(f?d:this,p)}var f=c&O,j=ob(b);return a}function pa(b,c,d,n,a,f,e,h){var r=c&ga;if(!r&&"function"!=typeof b)throw new ka(la);var g=n?n.length:0;g||(c&=~(G|aa),n=a=null);g-=a?a.length:0;if(c&aa){var l=n,q=a;n=a=null}var m=!r&&me(b);d=[b,c,d,n,a,l,q,f,e,h];if(m&&!0!==m){n=d[1];c=m[1];h=n|c;f=Z|S;a=O|ga;e=f|a|j|p;var l=n&Z&&!(c&Z),q=n&S&&!(c&S),k=(q?d:m)[7],A=(l?d:m)[8];f=h>=f&&h<=e&&(n<S||(q||l)&&k.length<=A);if(!(n>=S&&c>a)&&!(n>a&&c>=S)||f){c&O&&(d[2]=m[2],h|=n&O?0:j);if(n=m[3])a=d[3],
d[3]=a?Wc(a,n,m[4]):W(n),d[4]=a?z(d[3],Gb):W(m[4]);if(n=m[5])a=d[5],d[5]=a?Xc(a,n,m[6]):W(n),d[6]=a?z(d[5],Gb):W(m[6]);(n=m[7])&&(d[7]=W(n));c&Z&&(d[8]=null==d[8]?m[8]:fa(d[8],m[8]));null==d[9]&&(d[9]=m[9]);d[0]=m[0];d[1]=h}c=d[1];h=d[9]}d[9]=null==h?r?0:b.length:ba(h-g,0)||0;if(c==O){var t=d[0],B=d[2],u=function(){return(this instanceof u?w:t).apply(B,arguments)},w=ob(t);b=u}else b=(c==G||c==(O|G))&&!d[4].length?le.apply(C,d):bd.apply(C,d);return(m?Kb:dd)(b,d)}function fe(b,c,d,n,a,f,j){var e=-1,
h=b.length,r=c.length,p=!0;if(h!=r&&!(a&&r>h))return!1;for(;p&&++e<h;){var g=b[e],l=c[e],p=C;n&&(p=a?n(l,g,e):n(g,l,e));if("undefined"==typeof p)if(a)for(var m=r;m--&&!(l=c[m],p=g&&g===l||d(g,l,n,a,f,j)););else p=g&&g===l||d(g,l,n,a,f,j)}return!!p}function ee(b,c,d){switch(d){case Wa:case Xa:return+b==+c;case sb:return b.name==c.name&&b.message==c.message;case Ya:return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case Za:case $a:return b==c+""}return!1}function ge(b,c,d,a,f,j,e){var h=R(b),r=h.length,p=R(c).length;
if(r!=p&&!f)return!1;for(var g,p=-1;++p<r;){var l=h[p],m=P.call(c,l);if(m){var q=b[l],G=c[l],m=C;a&&(m=f?a(G,q,l):a(q,G,l));"undefined"==typeof m&&(m=q&&q===G||d(q,G,a,f,j,e))}if(!m)return!1;g||(g="constructor"==l)}return!g&&(d=b.constructor,a=c.constructor,d!=a&&"constructor"in b&&"constructor"in c&&!("function"==typeof d&&d instanceof d&&"function"==typeof a&&a instanceof a))?!1:!0}function H(b,c,d){var a=f.callback||tb,a=a===tb?Ca:a;return d?a(b,c,d):a}function Fa(b,c,d){var a=f.indexOf||Vb,a=
a===Vb?y:a;return b?a(b,c,d):a}function ce(b,c,d){var a=b.constructor;switch(c){case Wb:return Tb(b);case Wa:case Xa:return new a(+b);case Xb:case Yb:case Zb:case $b:case ac:case bc:case cc:case dc:case ec:return c=b.buffer,new a(d?Tb(c):c,b.byteOffset,b.length);case Ya:case $a:return new a(b);case Za:var f=new a(b.source,ed.exec(b));f.lastIndex=b.lastIndex}return f}function Ba(b,c){b=+b;c=null==c?fd:c;return-1<b&&0==b%1&&b<c}function F(b,c,d){if(!Q(d))return!1;var a=typeof c;"number"==a?(a=d.length,
a=N(a)&&Ba(c,a)):a="string"==a&&c in d;c=d[c];return a&&(b===b?b===c:c!==c)}function N(b){return"number"==typeof b&&-1<b&&0==b%1&&b<=fd}function xa(b){return b===b&&(0===b?0<1/b:!Q(b))}function gd(b,c){b=Ua(b);for(var d=-1,a=c.length,f={};++d<a;){var j=c[d];j in b&&(f[j]=b[j])}return f}function hd(b,c){var d={};hb(b,function(b,a,f){c(b,a,f)&&(d[a]=b)},qa);return d}function id(b){var c;if(!(u(b)&&U.call(b)==ja)||!P.call(b,"constructor")&&(c=b.constructor,"function"==typeof c&&!(c instanceof c)))return!1;
var d;hb(b,function(b,c){d=c},qa);return"undefined"==typeof d||P.call(b,d)}function jd(b){for(var c=qa(b),d=c.length,a=d&&b.length,j=f.support,j=a&&N(a)&&(E(b)||j.nonEnumArgs&&oa(b)),e=-1,h=[];++e<d;){var r=c[e];(j&&Ba(r,a)||P.call(b,r))&&h.push(r)}return h}function qb(b){return null==b?[]:!N(b.length)?ub(b):Q(b)?b:sa(b)}function Ua(b){return Q(b)?b:sa(b)}function Fc(b){return b instanceof I?b.clone():new T(b.__wrapped__,b.__chain__,W(b.__actions__))}function kd(b,c,d){if(!b||!b.length)return[];if(d?
F(b,c,d):null==c)c=1;return V(b,0>c?0:c)}function ld(b,c,d){var a=b?b.length:0;if(!a)return[];if(d?F(b,c,d):null==c)c=1;c=a-(+c||0);return V(b,0,0>c?0:c)}function md(b,c,d){var a=-1,f=b?b.length:0;for(c=H(c,d,3);++a<f;)if(c(b[a],a,b))return a;return-1}function nd(b){return b?b[0]:C}function Vb(b,c,d){var a=b?b.length:0;if(!a)return-1;if("number"==typeof d)d=0>d?ba(a+d,0):d||0;else if(d)return d=kb(b,c),b=b[d],(c===c?c===b:b!==b)?d:-1;return y(b,c,d)}function od(b){return kd(b,1)}function pd(b,c,d,
a){if(!b||!b.length)return[];null!=c&&"boolean"!=typeof c&&(a=d,d=F(b,c,a)?null:c,c=!1);var f=H();f===Ca&&null==d||(d=f(d,a,3));if(c&&Fa()==y){c=d;var j;d=-1;a=b.length;for(var f=-1,e=[];++d<a;){var h=b[d],r=c?c(h,d,b):h;if(!d||j!==r)j=r,e[++f]=h}b=e}else b=Pb(b,d);return b}function qd(b){for(var c=-1,d=(b&&b.length&&Hc(db(b,ne)))>>>0,a=J(d);++c<d;)a[c]=db(b,Da(c));return a}function rd(b,c){var d=-1,a=b?b.length:0,f={};for(a&&(!c&&!E(b[0]))&&(c=[]);++d<a;){var j=b[d];c?f[j]=c[d]:j&&(f[j[0]]=j[1])}return f}
function sd(b){b=f(b);b.__chain__=!0;return b}function td(b,c,d){return c.call(d,b)}function ud(b,c,d){var a=E(b)?Jb:de;if("function"!=typeof c||"undefined"!=typeof d)c=H(c,d,3);return a(b,c)}function fc(b,c,d){var a=E(b)?Gc:Qc;c=H(c,d,3);return a(b,c)}function gc(b,c,d){if(E(b))return c=md(b,c,d),-1<c?b[c]:C;c=H(c,d,3);return gb(b,c,da)}function vd(b,c,d){return"function"==typeof c&&"undefined"==typeof d&&E(b)?ia(b,c):da(b,Y(c,d,3))}function wd(b,c,d){if("function"==typeof c&&"undefined"==typeof d&&
E(b))for(d=b.length;d--&&!1!==c(b[d],d,b););else b=Mb(b,Y(c,d,3));return b}function hc(b,c,d){var a=b?b.length:0;N(a)||(b=ub(b),a=b.length);if(!a)return!1;d="number"==typeof d?0>d?ba(a+d,0):d||0:0;return"string"==typeof b||!E(b)&&pb(b)?d<a&&-1<b.indexOf(c,d):-1<Fa(b,c,d)}function ic(b,c,d){var a=E(b)?db:he;c=H(c,d,3);return a(b,c)}function jc(b,c,d,a){return(E(b)?Db:Uc)(b,H(c,a,4),d,3>arguments.length,da)}function xd(b,c,d,a){return(E(b)?Eb:Uc)(b,H(c,a,4),d,3>arguments.length,Mb)}function kc(b,c,
d){if(d?F(b,c,d):null==c)return b=qb(b),c=b.length,0<c?b[0+ta(vb()*(c-1-0+1))]:C;b=yd(b);b.length=fa(0>c?0:+c||0,b.length);return b}function yd(b){b=qb(b);for(var c=-1,d=b.length,a=J(d);++c<d;){var f=0+ta(vb()*(c-0+1));c!=f&&(a[c]=a[f]);a[f]=b[c]}return a}function zd(b,c,d){var a=E(b)?Fb:ie;if("function"!=typeof c||"undefined"!=typeof d)c=H(c,d,3);return a(b,c)}function Ad(b,c){var d;if("function"!=typeof c)if("function"==typeof b){var a=b;b=c;c=a}else throw new ka(la);return function(){0<--b?d=c.apply(this,
arguments):c=null;return d}}function Bd(b,c){var d=O;if(2<arguments.length)var a=V(arguments,2),f=z(a,Bd.placeholder),d=d|G;return pa(b,d,c,a,f)}function Cd(b,c){var d=O|ga;if(2<arguments.length)var a=V(arguments,2),f=z(a,Cd.placeholder),d=d|G;return pa(c,d,b,a,f)}function Dd(b,c,d){d&&F(b,c,d)&&(c=null);b=pa(b,r,null,null,null,null,null,c);b.placeholder=Dd.placeholder;return b}function Ed(b,c,d){d&&F(b,c,d)&&(c=null);b=pa(b,p,null,null,null,null,null,c);b.placeholder=Ed.placeholder;return b}function Fd(b,
c,d){function a(){var d=c-(Ka()-p);0>=d||d>c?(h&&La(h),d=m,h=l=m=C,d&&(q=Ka(),r=b.apply(g,e),!l&&!h&&(e=g=null))):l=fb(a,d)}function f(){l&&La(l);h=l=m=C;if(k||G!==c)q=Ka(),r=b.apply(g,e),!l&&!h&&(e=g=null)}function j(){e=arguments;p=Ka();g=this;m=k&&(l||!aa);if(!1===G)var d=aa&&!l;else{!h&&!aa&&(q=p);var A=G-(p-q),S=0>=A||A>G;S?(h&&(h=La(h)),q=p,r=b.apply(g,e)):h||(h=fb(f,A))}S&&l?l=La(l):!l&&c!==G&&(l=fb(a,c));d&&(S=!0,r=b.apply(g,e));S&&(!l&&!h)&&(e=g=null);return r}var e,h,r,p,g,l,m,q=0,G=!1,
k=!0;if("function"!=typeof b)throw new ka(la);c=0>c?0:c;if(!0===d)var aa=!0,k=!1;else Q(d)&&(aa=d.leading,G="maxWait"in d&&ba(+d.maxWait||0,c),k="trailing"in d?d.trailing:k);j.cancel=function(){l&&La(l);h&&La(h);h=l=m=C};return j}function lc(){var b=arguments,c=b.length-1;if(0>c)return function(b){return b};if(!Jb(b,s))throw new ka(la);return function(){for(var d=c,a=b[d].apply(this,arguments);d--;)a=b[d].call(this,a);return a}}function mc(b,c){if("function"!=typeof b||c&&"function"!=typeof c)throw new ka(la);
var d=function(){var a=d.cache,f=c?c.apply(this,arguments):arguments[0];if(a.has(f))return a.get(f);var j=b.apply(this,arguments);a.set(f,j);return j};d.cache=new mc.Cache;return d}function Gd(b){var c=V(arguments,1),d=z(c,Gd.placeholder);return pa(b,G,null,c,d)}function Hd(b){var c=V(arguments,1),d=z(c,Hd.placeholder);return pa(b,aa,null,c,d)}function oa(b){var c=u(b)?b.length:C;return N(c)&&U.call(b)==Ea||!1}function Id(b){return b&&1===b.nodeType&&u(b)&&-1<U.call(b).indexOf("Element")||!1}function nc(b){return u(b)&&
"string"==typeof b.message&&U.call(b)==sb||!1}function Q(b){var c=typeof b;return"function"==c||b&&"object"==c||!1}function X(b){return null==b?!1:U.call(b)==Sa?oe.test(Lc.call(b)):u(b)&&pe.test(b)||!1}function Jd(b){return"number"==typeof b||u(b)&&U.call(b)==Ya||!1}function Kd(b){return u(b)&&U.call(b)==Za||!1}function pb(b){return"string"==typeof b||u(b)&&U.call(b)==$a||!1}function Ha(b){return u(b)&&N(b.length)&&M[U.call(b)]||!1}function Tc(b){return eb(b,qa(b))}function oc(b){return Ob(b,qa(b))}
function qa(b){if(null==b)return[];Q(b)||(b=sa(b));for(var c=b.length,c=c&&N(c)&&(E(b)||ua.nonEnumArgs&&oa(b))&&c||0,d=b.constructor,a=-1,d="function"==typeof d&&d.prototype===b,f=J(c),j=0<c;++a<c;)f[a]=a+"";for(var e in b)(!j||!Ba(e,c))&&!("constructor"==e&&(d||!P.call(b,e)))&&f.push(e);return f}function ub(b){return Qb(b,R(b))}function $c(b){return(b=g(b))&&b.replace(qe,A)}function Ld(b){return(b=g(b))&&re.test(b)?b.replace(Md,"\\$&"):b}function Nd(b,c,d){d&&F(b,c,d)&&(c=0);return pc(b,c)}function cd(b,
c){var d="";b=g(b);c=+c;if(1>c||!b||!Ja(c))return d;do c%2&&(d+=b),c=ta(c/2),b+=b;while(c);return d}function Od(b,c,d){var a=b;b=g(b);if(!b)return b;if(d?F(a,c,d):null==c)return b.slice(x(b),ca(b)+1);c+="";return b.slice(e(b,c),q(b,c)+1)}function Zc(b,c,d){d&&F(b,c,d)&&(c=null);b=g(b);return b.match(c||Pd)||[]}function Qd(){var b=arguments.length,c=arguments[0];try{for(var d=J(b?b-1:0);0<--b;)d[b-1]=arguments[b];return c.apply(C,d)}catch(a){return nc(a)?a:new se(a)}}function tb(b,c,d){d&&F(b,c,d)&&
(c=null);return u(b)?Rd(b):Ca(b,c)}function qc(b){return function(){return b}}function wa(b){return b}function Rd(b){return Qa(Ra(b,!0))}function rc(b,c,d){if(null==d){var a=Q(c),f=a&&R(c),f=f&&f.length&&Ob(c,f);if(!(f?f.length:a))f=!1,d=c,c=b,b=this}f||(f=Ob(c,R(c)));var j=!0,a=-1,e=Ga(b),h=f.length;!1===d?j=!1:Q(d)&&"chain"in d&&(j=d.chain);for(;++a<h;){d=f[a];var r=c[d];b[d]=r;e&&(b.prototype[d]=function(c){return function(){var d=this.__chain__;if(j||d){var a=b(this.__wrapped__);(a.__actions__=
W(this.__actions__)).push({func:c,args:arguments,thisArg:b});a.__chain__=d;return a}d=[this.value()];Rb.apply(d,arguments);return c.apply(b,d)}}(r))}return b}function Sd(){}h=h?va.defaults(Ma.Object(),h,va.pick(Ma,te)):Ma;var J=h.Array,Td=h.Date,se=h.Error,sc=h.Function,ya=h.Math,tc=h.Number,sa=h.Object,uc=h.RegExp,ue=h.String,ka=h.TypeError,vc=J.prototype,wc=sa.prototype,xc=(xc=h.window)&&xc.document,Lc=sc.prototype.toString,ne=Da("length"),P=wc.hasOwnProperty,ve=0,U=wc.toString,we=h._,oe=uc("^"+
Ld(U).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),za=X(za=h.ArrayBuffer)&&za,lb=X(lb=za&&(new za(0)).slice)&&lb,rb=ya.ceil,La=h.clearTimeout,ta=ya.floor,Na=X(Na=sa.getPrototypeOf)&&Na,Rb=vc.push,xe=wc.propertyIsEnumerable,bb=X(bb=h.Set)&&bb,fb=h.setTimeout,yc=vc.splice,Aa=X(Aa=h.Uint8Array)&&Aa,wb=X(wb=h.WeakMap)&&wb,Oa;try{var xb=X(xb=h.Float64Array)&&xb,ye=new xb(new za(10),0,1)&&xb}catch(cf){}Oa=ye;var zc=X(zc=J.isArray)&&zc,ab=X(ab=sa.create)&&ab,Ja=h.isFinite,yb=
X(yb=sa.keys)&&yb,ba=ya.max,fa=ya.min,Ac=X(Ac=Td.now)&&Ac,Bc=X(Bc=tc.isFinite)&&Bc,pc=h.parseInt,vb=ya.random,Ic=tc.NEGATIVE_INFINITY,Ib=tc.POSITIVE_INFINITY,zb=ya.pow(2,32)-1,ke=zb-1,je=zb>>>1,Ud=Oa?Oa.BYTES_PER_ELEMENT:0,fd=ya.pow(2,53)-1,Ab=wb&&new wb,ua=f.support={};(function(b){ua.funcDecomp=!X(h.WinRTError)&&Mc.test(K);ua.funcNames="string"==typeof sc.name;try{ua.dom=11===xc.createDocumentFragment().nodeType}catch(c){ua.dom=!1}try{ua.nonEnumArgs=!xe.call(arguments,1)}catch(d){ua.nonEnumArgs=
!0}})(0,0);f.templateSettings={escape:ze,evaluate:Ae,interpolate:Vd,variable:"",imports:{_:f}};var Ia,Cc=function(){};Ia=function(b){if(Q(b)){Cc.prototype=b;var c=new Cc;Cc.prototype=null}return c||h.Object()};var Kb=!Ab?wa:function(b,c){Ab.set(b,c);return b};lb||(Tb=!za||!Aa?qc(null):function(b){var c=b.byteLength,d=Oa?ta(c/Ud):0,a=d*Ud,f=new za(c);if(d){var j=new Oa(f,0,d);j.set(new Oa(b,0,d))}c!=a&&(j=new Aa(f,a),j.set(new Aa(b,a)));return f});var Lb=!ab||!bb?qc(null):function(b){return new Ec(b)},
me=!Ab?Sd:function(b){return Ab.get(b)},dd,Wd=0,Xd=0;dd=function(b,c){var d=Ka(),a=Be-(d-Xd);Xd=d;if(0<a){if(++Wd>=Ce)return b}else Wd=0;return Kb(b,c)};var De=mb(function(b,c,d){P.call(b,d)?++b[d]:b[d]=1}),Ee=mb(function(b,c,d){P.call(b,d)?b[d].push(c):b[d]=[c]}),Fe=mb(function(b,c,d){b[d]=c}),Ge=ad(Hc),He=ad(function(b){for(var c=-1,d=b.length,a=Ib;++c<d;){var f=b[c];f<a&&(a=f)}return a},!0),Ie=mb(function(b,c,d){b[d?0:1].push(c)},function(){return[[],[]]}),Ka=Ac||function(){return(new Td).getTime()},
E=zc||function(b){return u(b)&&N(b.length)&&U.call(b)==Va||!1};ua.dom||(Id=function(b){return b&&1===b.nodeType&&u(b)&&!jb(b)||!1});var Je=Bc||function(b){return"number"==typeof b&&Ja(b)},Ga=!(s(/x/)||Aa&&!s(Aa))?s:function(b){return U.call(b)==Sa},jb=!Na?id:function(b){if(!(b&&U.call(b)==ja))return!1;var c=b.valueOf,d=X(c)&&(d=Na(c))&&Na(d);return d?b==d||Na(b)==d:id(b)},Dc=Yc(Pa),R=!yb?jd:function(b){if(b)var c=b.constructor,d=b.length;return"function"==typeof c&&c.prototype===b||"function"!=typeof b&&
d&&N(d)?jd(b):Q(b)?yb(b):[]},Ke=Yc(Sc),Le=nb(function(b,c,d){c=c.toLowerCase();return b+(d?c.charAt(0).toUpperCase()+c.slice(1):c)}),Me=nb(function(b,c,d){return b+(d?"-":"")+c.toLowerCase()});8!=pc(Ne+"08")&&(Nd=function(b,c,d){(d?F(b,c,d):null==c)?c=0:c&&(c=+c);b=Od(b);return pc(b,c||(Oe.test(b)?16:10))});var Pe=nb(function(b,c,d){return b+(d?"_":"")+c.toLowerCase()}),Qe=nb(function(b,c,d){return b+(d?" ":"")+(c.charAt(0).toUpperCase()+c.slice(1))});f.prototype=$.prototype;T.prototype=Ia($.prototype);
T.prototype.constructor=T;I.prototype=Ia($.prototype);I.prototype.constructor=I;ma.prototype["delete"]=function(b){return this.has(b)&&delete this.__data__[b]};ma.prototype.get=function(b){return"__proto__"==b?C:this.__data__[b]};ma.prototype.has=function(b){return"__proto__"!=b&&P.call(this.__data__,b)};ma.prototype.set=function(b,c){"__proto__"!=b&&(this.__data__[b]=c);return this};Ec.prototype.push=function(b){var c=this.data;"string"==typeof b||Q(b)?c.set.add(b):c.hash[b]=!0};mc.Cache=ma;f.after=
function(b,c){if("function"!=typeof c)if("function"==typeof b){var d=b;b=c;c=d}else throw new ka(la);b=Ja(b=+b)?b:0;return function(){if(1>--b)return c.apply(this,arguments)}};f.ary=function(b,c,d){d&&F(b,c,d)&&(c=null);c=b&&null==c?b.length:ba(+c||0,0);return pa(b,Z,null,null,null,null,c)};f.assign=Dc;f.at=function(b){if(N(b?b.length:0))b=qb(b);return Kc(b,ea(arguments,!1,!1,1))};f.before=Ad;f.bind=Bd;f.bindAll=function(b){for(var c=b,d=1<arguments.length?ea(arguments,!1,!1,1):oc(b),a=-1,f=d.length;++a<
f;){var j=d[a];c[j]=pa(c[j],O,c)}return c};f.bindKey=Cd;f.callback=tb;f.chain=sd;f.chunk=function(b,c,d){c=(d?F(b,c,d):null==c)?1:ba(+c||1,1);d=0;for(var a=b?b.length:0,f=-1,j=J(rb(a/c));d<a;)j[++f]=V(b,d,d+=c);return j};f.compact=function(b){for(var c=-1,d=b?b.length:0,a=-1,f=[];++c<d;){var j=b[c];j&&(f[++a]=j)}return f};f.constant=qc;f.countBy=De;f.create=function(b,c,d){var a=Ia(b);d&&F(b,c,d)&&(c=null);return c?eb(c,a,R(c)):a};f.curry=Dd;f.curryRight=Ed;f.debounce=Fd;f.defaults=function(b){if(null==
b)return b;var c=W(arguments);c.push(Hb);return Dc.apply(C,c)};f.defer=function(b){return Oc(b,1,arguments,1)};f.delay=function(b,c){return Oc(b,c,arguments,2)};f.difference=function(){for(var b=-1,c=arguments.length;++b<c;){var d=arguments[b];if(E(d)||oa(d))break}return Ta(d,ea(arguments,!1,!0,++b))};f.drop=kd;f.dropRight=ld;f.dropRightWhile=function(b,c,d){var a=b?b.length:0;if(!a)return[];for(c=H(c,d,3);a--&&c(b[a],a,b););return V(b,0,a+1)};f.dropWhile=function(b,c,d){var a=b?b.length:0;if(!a)return[];
var f=-1;for(c=H(c,d,3);++f<a&&c(b[f],f,b););return V(b,f)};f.fill=function(b,c,d,a){var f=b?b.length:0;if(!f)return[];d&&("number"!=typeof d&&F(b,c,d))&&(d=0,a=f);f=b.length;d=null==d?0:+d||0;0>d&&(d=-d>f?0:f+d);a="undefined"==typeof a||a>f?f:+a||0;0>a&&(a+=f);f=d>a?0:a>>>0;for(d>>>=0;d<f;)b[d++]=c;return b};f.filter=fc;f.flatten=function(b,c,d){var a=b?b.length:0;d&&F(b,c,d)&&(c=!1);return a?ea(b,c):[]};f.flattenDeep=function(b){return b&&b.length?ea(b,!0):[]};f.flow=function(){var b=arguments,
c=b.length;if(!c)return function(b){return b};if(!Jb(b,s))throw new ka(la);return function(){for(var d=0,a=b[d].apply(this,arguments);++d<c;)a=b[d].call(this,a);return a}};f.flowRight=lc;f.forEach=vd;f.forEachRight=wd;f.forIn=function(b,c,d){if("function"!=typeof c||"undefined"!=typeof d)c=Y(c,d,3);return hb(b,c,qa)};f.forInRight=function(b,c,d){c=Y(c,d,3);return Nb(b,c,qa)};f.forOwn=function(b,c,d){if("function"!=typeof c||"undefined"!=typeof d)c=Y(c,d,3);return ra(b,c)};f.forOwnRight=function(b,
c,d){c=Y(c,d,3);return Nb(b,c,R)};f.functions=oc;f.groupBy=Ee;f.indexBy=Fe;f.initial=function(b){return ld(b,1)};f.intersection=function(){for(var b=[],c=-1,d=arguments.length,a=[],f=Fa(),j=f==y;++c<d;){var e=arguments[c];if(E(e)||oa(e))b.push(e),a.push(j&&120<=e.length&&Lb(c&&e))}var d=b.length,j=b[0],h=-1,r=j?j.length:0,p=[],g=a[0];a:for(;++h<r;)if(e=j[h],0>(g?cb(g,e):f(p,e))){for(c=d;--c;){var l=a[c];if(0>(l?cb(l,e):f(b[c],e)))continue a}g&&g.push(e);p.push(e)}return p};f.invert=function(b,c,d){d&&
F(b,c,d)&&(c=null);d=-1;for(var a=R(b),f=a.length,j={};++d<f;){var e=a[d],h=b[e];c?P.call(j,h)?j[h].push(e):j[h]=[e]:j[h]=e}return j};f.invoke=function(b,c){var d=b,a=c,f=V(arguments,2),j=-1,e="function"==typeof a,h=d?d.length:0,r=N(h)?J(h):[];da(d,function(b){var c=e?a:null!=b&&b[a];r[++j]=c?c.apply(b,f):C});return r};f.keys=R;f.keysIn=qa;f.map=ic;f.mapValues=function(b,c,d){var a={};c=H(c,d,3);ra(b,function(b,d,f){a[d]=c(b,d,f)});return a};f.matches=Rd;f.matchesProperty=function(b,c){return Nc(b+
"",Ra(c,!0))};f.memoize=mc;f.merge=Ke;f.mixin=rc;f.negate=function(b){if("function"!=typeof b)throw new ka(la);return function(){return!b.apply(this,arguments)}};f.omit=function(b,c,d){if(null==b)return{};if("function"!=typeof c){var a=db(ea(arguments,!1,!1,1),ue);return gd(b,Ta(qa(b),a))}c=Y(c,d,3);return hd(b,function(b,d,a){return!c(b,d,a)})};f.once=function(b){return Ad(b,2)};f.pairs=function(b){for(var c=-1,d=R(b),a=d.length,f=J(a);++c<a;){var j=d[c];f[c]=[j,b[j]]}return f};f.partial=Gd;f.partialRight=
Hd;f.partition=Ie;f.pick=function(b,c,d){return null==b?{}:"function"==typeof c?hd(b,Y(c,d,3)):gd(b,ea(arguments,!1,!1,1))};f.pluck=function(b,c){return ic(b,Da(c))};f.property=function(b){return Da(b+"")};f.propertyOf=function(b){return function(c){return null==b?C:b[c]}};f.pull=function(){var b=arguments[0];if(!b||!b.length)return b;for(var c=0,d=Fa(),a=arguments.length;++c<a;)for(var f=0,j=arguments[c];-1<(f=d(b,j,f));)yc.call(b,f,1);return b};f.pullAt=function(b){var c=b||[],d=ea(arguments,!1,
!1,1),a=d.length,f=Kc(c,d);for(d.sort(k);a--;){var j=parseFloat(d[a]);if(j!=e&&Ba(j)){var e=j;yc.call(c,j,1)}}return f};f.range=function(b,c,d){d&&F(b,c,d)&&(c=d=null);b=+b||0;d=null==d?1:+d||0;null==c?(c=b,b=0):c=+c||0;var a=-1;c=ba(rb((c-b)/(d||1)),0);for(var f=J(c);++a<c;)f[a]=b,b+=d;return f};f.rearg=function(b){var c=ea(arguments,!1,!1,1);return pa(b,S,null,null,null,c)};f.reject=function(b,c,d){var a=E(b)?Gc:Qc;c=H(c,d,3);return a(b,function(b,d,a){return!c(b,d,a)})};f.remove=function(b,c,d){var a=
-1,f=b?b.length:0,j=[];for(c=H(c,d,3);++a<f;)d=b[a],c(d,a,b)&&(j.push(d),yc.call(b,a--,1),f--);return j};f.rest=od;f.shuffle=yd;f.slice=function(b,c,d){var a=b?b.length:0;if(!a)return[];d&&("number"!=typeof d&&F(b,c,d))&&(c=0,d=a);return V(b,c,d)};f.sortBy=function(b,c,d){var a=-1,f=b?b.length:0,j=N(f)?J(f):[];d&&F(b,c,d)&&(c=null);c=H(c,d,3);da(b,function(b,d,f){j[++a]={criteria:c(b,d,f),index:a,value:b}});return t(j,l)};f.sortByAll=function(b){var c=arguments;3<c.length&&F(c[1],c[2],c[3])&&(c=[b,
c[1]]);var d=-1,a=b?b.length:0,f=ea(c,!1,!1,1),j=N(a)?J(a):[];da(b,function(b){for(var c=f.length,a=J(c);c--;)a[c]=null==b?C:b[f[c]];j[++d]={criteria:a,index:d,value:b}});return t(j,m)};f.spread=function(b){if("function"!=typeof b)throw new ka(la);return function(c){return b.apply(this,c)}};f.take=function(b,c,d){if(!b||!b.length)return[];if(d?F(b,c,d):null==c)c=1;return V(b,0,0>c?0:c)};f.takeRight=function(b,c,d){var a=b?b.length:0;if(!a)return[];if(d?F(b,c,d):null==c)c=1;c=a-(+c||0);return V(b,
0>c?0:c)};f.takeRightWhile=function(b,c,d){var a=b?b.length:0;if(!a)return[];for(c=H(c,d,3);a--&&c(b[a],a,b););return V(b,a+1)};f.takeWhile=function(b,c,d){var a=b?b.length:0;if(!a)return[];var f=-1;for(c=H(c,d,3);++f<a&&c(b[f],f,b););return V(b,0,f)};f.tap=function(b,c,d){c.call(d,b);return b};f.throttle=function(b,c,d){var a=!0,f=!0;if("function"!=typeof b)throw new ka(la);!1===d?a=!1:Q(d)&&(a="leading"in d?!!d.leading:a,f="trailing"in d?!!d.trailing:f);Bb.leading=a;Bb.maxWait=+c;Bb.trailing=f;
return Fd(b,c,Bb)};f.thru=td;f.times=function(b,c,d){b=+b;if(1>b||!Ja(b))return[];var a=-1,f=J(fa(b,zb));for(c=Y(c,d,1);++a<b;)a<zb?f[a]=c(a):c(a);return f};f.toArray=function(b){var c=b?b.length:0;return!N(c)?ub(b):!c?[]:W(b)};f.toPlainObject=Tc;f.transform=function(b,c,d,a){var f=E(b)||Ha(b);c=H(c,a,4);null==d&&(f||Q(b)?(a=b.constructor,d=f?E(b)?new a:[]:Ia(Ga(a)&&a.prototype)):d={});(f?ia:ra)(b,function(b,a,f){return c(d,b,a,f)});return d};f.union=function(){return Pb(ea(arguments,!1,!0))};f.uniq=
pd;f.unzip=qd;f.values=ub;f.valuesIn=function(b){return Qb(b,qa(b))};f.where=function(b,c){return fc(b,Qa(c))};f.without=function(b){return Ta(b,V(arguments,1))};f.wrap=function(b,c){c=null==c?wa:c;return pa(c,G,null,[b],[])};f.xor=function(){for(var b=-1,c=arguments.length;++b<c;){var d=arguments[b];if(E(d)||oa(d))var a=a?Ta(a,d).concat(Ta(d,a)):d}return a?Pb(a):[]};f.zip=function(){for(var b=arguments.length,c=J(b);b--;)c[b]=arguments[b];return qd(c)};f.zipObject=rd;f.backflow=lc;f.collect=ic;f.compose=
lc;f.each=vd;f.eachRight=wd;f.extend=Dc;f.iteratee=tb;f.methods=oc;f.object=rd;f.select=fc;f.tail=od;f.unique=pd;rc(f,f);f.attempt=Qd;f.camelCase=Le;f.capitalize=function(b){return(b=g(b))&&b.charAt(0).toUpperCase()+b.slice(1)};f.clone=function(b,c,d,a){c&&"boolean"!=typeof c&&F(b,c,d)?c=!1:"function"==typeof c&&(a=d,d=c,c=!1);d="function"==typeof d&&Y(d,a,1);return Ra(b,c,d)};f.cloneDeep=function(b,c,d){c="function"==typeof c&&Y(c,d,1);return Ra(b,!0,c)};f.deburr=$c;f.endsWith=function(b,c,d){b=
g(b);c+="";var a=b.length;d=("undefined"==typeof d?a:fa(0>d?0:+d||0,a))-c.length;return 0<=d&&b.indexOf(c,d)==d};f.escape=function(b){return(b=g(b))&&Re.test(b)?b.replace(Yd,na):b};f.escapeRegExp=Ld;f.every=ud;f.find=gc;f.findIndex=md;f.findKey=function(b,c,d){c=H(c,d,3);return gb(b,c,ra,!0)};f.findLast=function(b,c,d){c=H(c,d,3);return gb(b,c,Mb)};f.findLastIndex=function(b,c,d){var a=b?b.length:0;for(c=H(c,d,3);a--;)if(c(b[a],a,b))return a;return-1};f.findLastKey=function(b,c,d){c=H(c,d,3);return gb(b,
c,Pc,!0)};f.findWhere=function(b,c){return gc(b,Qa(c))};f.first=nd;f.has=function(b,c){return b?P.call(b,c):!1};f.identity=wa;f.includes=hc;f.indexOf=Vb;f.inRange=function(b,c,d){c=+c||0;"undefined"===typeof d?(d=c,c=0):d=+d||0;return b>=c&&b<d};f.isArguments=oa;f.isArray=E;f.isBoolean=function(b){return!0===b||(!1===b||u(b)&&U.call(b)==Wa)||!1};f.isDate=function(b){return u(b)&&U.call(b)==Xa||!1};f.isElement=Id;f.isEmpty=function(b){if(null==b)return!0;var c=b.length;return N(c)&&(E(b)||pb(b)||oa(b)||
u(b)&&Ga(b.splice))?!c:!R(b).length};f.isEqual=function(b,c,d,a){d="function"==typeof d&&Y(d,a,3);if(!d&&xa(b)&&xa(c))return b===c;a=d?d(b,c):C;return"undefined"==typeof a?ib(b,c,d):!!a};f.isError=nc;f.isFinite=Je;f.isFunction=Ga;f.isMatch=function(b,c,d,a){var f=R(c),j=f.length;d="function"==typeof d&&Y(d,a,3);if(!d&&1==j){var e=f[0];a=c[e];if(xa(a))return null!=b&&a===b[e]&&P.call(b,e)}for(var e=J(j),h=J(j);j--;)a=e[j]=c[f[j]],h[j]=xa(a);return Rc(b,f,e,h,d)};f.isNaN=function(b){return Jd(b)&&b!=
+b};f.isNative=X;f.isNull=function(b){return null===b};f.isNumber=Jd;f.isObject=Q;f.isPlainObject=jb;f.isRegExp=Kd;f.isString=pb;f.isTypedArray=Ha;f.isUndefined=function(b){return"undefined"==typeof b};f.kebabCase=Me;f.last=function(b){var c=b?b.length:0;return c?b[c-1]:C};f.lastIndexOf=function(b,c,d){var a=b?b.length:0;if(!a)return-1;var f=a;if("number"==typeof d)f=(0>d?ba(a+d,0):fa(d||0,a-1))+1;else if(d)return f=kb(b,c,!0)-1,b=b[f],(c===c?c===b:b!==b)?f:-1;if(c!==c)return w(b,f,!0);for(;f--;)if(b[f]===
c)return f;return-1};f.max=Ge;f.min=He;f.noConflict=function(){h._=we;return this};f.noop=Sd;f.now=Ka;f.pad=function(b,c,d){b=g(b);c=+c;var a=b.length;if(a>=c||!Ja(c))return b;a=(c-a)/2;c=ta(a);a=rb(a);d=Ub("",a,d);return d.slice(0,c)+b+d};f.padLeft=function(b,c,d){return(b=g(b))&&Ub(b,c,d)+b};f.padRight=function(b,c,d){return(b=g(b))&&b+Ub(b,c,d)};f.parseInt=Nd;f.random=function(b,c,d){d&&F(b,c,d)&&(c=d=null);var a=null==b,f=null==c;null==d&&(f&&"boolean"==typeof b?(d=b,b=1):"boolean"==typeof c&&
(d=c,f=!0));a&&f&&(c=1,f=!1);b=+b||0;f?(c=b,b=0):c=+c||0;return d||b%1||c%1?(d=vb(),fa(b+d*(c-b+parseFloat("1e-"+((d+"").length-1))),c)):b+ta(vb()*(c-b+1))};f.reduce=jc;f.reduceRight=xd;f.repeat=cd;f.result=function(b,c,d){c=null==b?C:b[c];"undefined"==typeof c&&(c=d);return Ga(c)?c.call(b):c};f.runInContext=K;f.size=function(b){var c=b?b.length:0;return N(c)?c:R(b).length};f.snakeCase=Pe;f.some=zd;f.sortedIndex=function(b,c,d,a){var f=H(d);return f===Ca&&null==d?kb(b,c):Sb(b,c,f(d,a,1))};f.sortedLastIndex=
function(b,c,d,a){var f=H(d);return f===Ca&&null==d?kb(b,c,!0):Sb(b,c,f(d,a,1),!0)};f.startCase=Qe;f.startsWith=function(b,c,a){b=g(b);a=null==a?0:fa(0>a?0:+a||0,b.length);return b.lastIndexOf(c,a)==a};f.template=function(b,c,a){var j=f.templateSettings;a&&F(b,c,a)&&(c=a=null);b=g(b);c=Pa(Pa({},a||c),j,Jc);a=Pa(Pa({},c.imports),j.imports,Jc);var e=R(a),h=Qb(a,e),r,p,l=0;a=c.interpolate||Cb;var m="__p += '";a=uc((c.escape||Cb).source+"|"+a.source+"|"+(a===Vd?Se:Cb).source+"|"+(c.evaluate||Cb).source+
"|$","g");var q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Te+"]")+"\n";b.replace(a,function(c,a,d,f,j,e){d||(d=f);m+=b.slice(l,e).replace(Ue,B);a&&(r=!0,m+="' +\n__e("+a+") +\n'");j&&(p=!0,m+="';\n"+j+";\n__p += '");d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'");l=e+c.length;return c});m+="';\n";(c=c.variable)||(m="with (obj) {\n"+m+"\n}\n");m=(p?m.replace(Ve,""):m).replace(We,"$1").replace(Xe,"$1;");m="function("+(c||"obj")+") {\n"+(c?"":"obj || (obj = {});\n")+
"var __t, __p = ''"+(r?", __e = _.escape":"")+(p?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";c=Qd(function(){return sc(e,q+"return "+m).apply(C,h)});c.source=m;if(nc(c))throw c;return c};f.trim=Od;f.trimLeft=function(b,c,a){var f=b;b=g(b);return!b?b:(a?F(f,c,a):null==c)?b.slice(x(b)):b.slice(e(b,c+""))};f.trimRight=function(b,c,a){var f=b;b=g(b);return!b?b:(a?F(f,c,a):null==c)?b.slice(0,ca(b)+1):b.slice(0,q(b,c+"")+1)};f.trunc=function(b,
c,a){a&&F(b,c,a)&&(c=null);var f=Ye;a=Ze;if(null!=c)if(Q(c)){var j="separator"in c?c.separator:j,f="length"in c?+c.length||0:f;a="omission"in c?g(c.omission):a}else f=+c||0;b=g(b);if(f>=b.length)return b;f-=a.length;if(1>f)return a;c=b.slice(0,f);if(null==j)return c+a;if(Kd(j)){if(b.slice(f).search(j)){var e,h=b.slice(0,f);j.global||(j=uc(j.source,(ed.exec(j)||"")+"g"));for(j.lastIndex=0;b=j.exec(h);)e=b.index;c=c.slice(0,null==e?f:e)}}else b.indexOf(j,f)!=f&&(j=c.lastIndexOf(j),-1<j&&(c=c.slice(0,
j)));return c+a};f.unescape=function(b){return(b=g(b))&&$e.test(b)?b.replace(Zd,D):b};f.uniqueId=function(b){var c=++ve;return g(b)+c};f.words=Zc;f.all=ud;f.any=zd;f.contains=hc;f.detect=gc;f.foldl=jc;f.foldr=xd;f.head=nd;f.include=hc;f.inject=jc;var $d={};ra(f,function(b,c){f.prototype[c]||($d[c]=b)});rc(f,$d,!1);f.sample=kc;f.prototype.sample=function(b){return!this.__chain__&&null==b?kc(this.value()):this.thru(function(c){return kc(c,b)})};f.VERSION=ha;ia("bind bindKey curry curryRight partial partialRight".split(" "),
function(b){f[b].placeholder=f});ia(["filter","map","takeWhile"],function(b,c){var a=c==ae,f=c==af;I.prototype[b]=function(b,j){var e=this.clone(),h=e.__filtered__,r=e.__iteratees__||(e.__iteratees__=[]);e.__filtered__=h||a||f&&0>e.__dir__;r.push({iteratee:H(b,j,3),type:c});return e}});ia(["drop","take"],function(b,c){var a="__"+b+"Count__",f=b+"While";I.prototype[b]=function(f){f=null==f?1:ba(ta(f)||0,0);var j=this.clone();if(j.__filtered__){var e=j[a];j[a]=c?fa(e,f):e+f}else(j.__views__||(j.__views__=
[])).push({size:f,type:b+(0>j.__dir__?"Right":"")});return j};I.prototype[b+"Right"]=function(c){return this.reverse()[b](c).reverse()};I.prototype[b+"RightWhile"]=function(b,c){return this.reverse()[f](b,c).reverse()}});ia(["first","last"],function(b,c){var a="take"+(c?"Right":"");I.prototype[b]=function(){return this[a](1).value()[0]}});ia(["initial","rest"],function(b,c){var a="drop"+(c?"":"Right");I.prototype[b]=function(){return this[a](1)}});ia(["pluck","where"],function(b,c){var a=c?"filter":
"map",f=c?Qa:Da;I.prototype[b]=function(b){return this[a](f(b))}});I.prototype.compact=function(){return this.filter(wa)};I.prototype.dropWhile=function(b,c){var a;b=H(b,c,3);return this.filter(function(c,f,j){return a||(a=!b(c,f,j))})};I.prototype.reject=function(b,c){b=H(b,c,3);return this.filter(function(c,a,f){return!b(c,a,f)})};I.prototype.slice=function(b,c){b=null==b?0:+b||0;var a=0>b?this.takeRight(-b):this.drop(b);"undefined"!=typeof c&&(c=+c||0,a=0>c?a.dropRight(-c):a.take(c-b));return a};
I.prototype.toArray=function(){return this.drop(0)};ra(I.prototype,function(b,c){var a=f[c],j=/^(?:first|last)$/.test(c);f.prototype[c]=function(){var c=this.__wrapped__,e=arguments,h=this.__chain__,r=!!this.__actions__.length,p=c instanceof I,g=p&&!r;if(j&&!h)return g?b.call(c):a.call(f,this.value());var l=function(b){b=[b];Rb.apply(b,e);return a.apply(f,b)};if(p||E(c)){c=g?c:new I(this);c=b.apply(c,e);if(!j&&(r||c.__actions__))(c.__actions__||(c.__actions__=[])).push({func:td,args:[l],thisArg:f});
return new T(c,h)}return this.thru(l)}});ia("concat join pop push shift sort splice unshift".split(" "),function(b){var c=vc[b],a=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",j=/^(?:join|pop|shift)$/.test(b);f.prototype[b]=function(){var b=arguments;return j&&!this.__chain__?c.apply(this.value(),b):this[a](function(a){return c.apply(a,b)})}});I.prototype.clone=function(){var b=this.__actions__,c=this.__iteratees__,a=this.__views__,f=new I(this.__wrapped__);f.__actions__=b?W(b):null;f.__dir__=this.__dir__;
f.__dropCount__=this.__dropCount__;f.__filtered__=this.__filtered__;f.__iteratees__=c?W(c):null;f.__takeCount__=this.__takeCount__;f.__views__=a?W(a):null;return f};I.prototype.reverse=function(){if(this.__filtered__){var b=new I(this);b.__dir__=-1;b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b};I.prototype.value=function(){var b,c=this.__wrapped__.value();if(!E(c))return Vc(c,this.__actions__);var a=this.__dir__,f=0>a,j=0,e=c.length,h=this.__views__;b=-1;for(var r=h?h.length:0;++b<
r;){var p=h[b],g=p.size;switch(p.type){case "drop":j+=g;break;case "dropRight":e-=g;break;case "take":e=fa(e,j+g);break;case "takeRight":j=ba(j,e-g)}}b=j;r=e;e=r-b;j=this.__dropCount__;h=fa(e,this.__takeCount__);f=f?r:b-1;r=(b=this.__iteratees__)?b.length:0;p=0;g=[];a:for(;e--&&p<h;){for(var f=f+a,l=-1,m=c[f];++l<r;){var q=b[l],G=q.iteratee,G=G(m,f,c),q=q.type;if(q==bf)m=G;else if(!G)if(q==ae)continue a;else break a}j?j--:g[p++]=m}return g};f.prototype.chain=function(){return sd(this)};f.prototype.commit=
function(){return new T(this.value(),this.__chain__)};f.prototype.plant=function(b){for(var c,a=this;a instanceof $;){var f=Fc(a);c?j.__wrapped__=f:c=f;var j=f,a=a.__wrapped__}j.__wrapped__=b;return c};f.prototype.reverse=function(){var b=this.__wrapped__;return b instanceof I?(this.__actions__.length&&(b=new I(this)),new T(b.reverse(),this.__chain__)):this.thru(function(b){return b.reverse()})};f.prototype.toString=function(){return this.value()+""};f.prototype.run=f.prototype.toJSON=f.prototype.valueOf=
f.prototype.value=function(){return Vc(this.__wrapped__,this.__actions__)};f.prototype.collect=f.prototype.map;f.prototype.head=f.prototype.first;f.prototype.select=f.prototype.filter;f.prototype.tail=f.prototype.rest;return f}var C,ha="3.3.0",O=1,ga=2,j=4,r=8,p=16,G=32,aa=64,S=128,Z=256,Ye=30,Ze="...",Ce=150,Be=16,ae=0,bf=1,af=2,la="Expected a function",Gb="__lodash_placeholder__",Ea="[object Arguments]",Va="[object Array]",Wa="[object Boolean]",Xa="[object Date]",sb="[object Error]",Sa="[object Function]",
Ya="[object Number]",ja="[object Object]",Za="[object RegExp]",$a="[object String]",Wb="[object ArrayBuffer]",Xb="[object Float32Array]",Yb="[object Float64Array]",Zb="[object Int8Array]",$b="[object Int16Array]",ac="[object Int32Array]",bc="[object Uint8Array]",cc="[object Uint8ClampedArray]",dc="[object Uint16Array]",ec="[object Uint32Array]",Ve=/\b__p \+= '';/g,We=/\b(__p \+=) '' \+/g,Xe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zd=/&(?:amp|lt|gt|quot|#39|#96);/g,Yd=/[&<>"'`]/g,$e=RegExp(Zd.source),Re=RegExp(Yd.source),
ze=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Vd=/<%=([\s\S]+?)%>/g,Se=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ed=/\w*$/,be=/^\s*function[ \n\r\t]+\w/,Oe=/^0[xX]/,pe=/^\[object .+?Constructor\]$/,qe=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cb=/($^)/,Md=/[.*+?^${}()|[\]\/\\]/g,re=RegExp(Md.source),Mc=/\bthis\b/,Ue=/['\n\r\u2028\u2029\\]/g,Pd;Pd=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+",
"g");var Ne=" \t\x0B\f\u00a0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",te="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Te=-1,M={};M[Xb]=M[Yb]=M[Zb]=M[$b]=M[ac]=M[bc]=M[cc]=M[dc]=M[ec]=
!0;M[Ea]=M[Va]=M[Wb]=M[Wa]=M[Xa]=M[sb]=M[Sa]=M["[object Map]"]=M[Ya]=M[ja]=M[Za]=M["[object Set]"]=M[$a]=M["[object WeakMap]"]=!1;var L={};L[Ea]=L[Va]=L[Wb]=L[Wa]=L[Xa]=L[Xb]=L[Yb]=L[Zb]=L[$b]=L[ac]=L[Ya]=L[ja]=L[Za]=L[$a]=L[bc]=L[cc]=L[dc]=L[ec]=!0;L[sb]=L[Sa]=L["[object Map]"]=L["[object Set]"]=L["[object WeakMap]"]=!1;var Bb={leading:!1,maxWait:0,trailing:!1},Db={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a",
"\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U",
"\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},Eb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Hb={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},T={"function":!0,object:!0},Fb={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ma=T[typeof window]&&window!==(this&&this.window)?window:this,ma=T[typeof exports]&&
exports&&!exports.nodeType&&exports,T=T[typeof module]&&module&&!module.nodeType&&module,$=ma&&T&&"object"==typeof global&&global;if($&&($.global===$||$.window===$||$.self===$))Ma=$;var $=T&&T.exports===ma&&ma,va=K();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ma._=va,define(function(){return va})):ma&&T?$?(T.exports=va)._=va:ma._=va:Ma._=va}).call(this);var Backbone=Backbone||{};
(function(){var k=[].slice,y=function(k,g,a){var e;k=-1;var q=g.length;switch(a.length){case 0:for(;++k<q;)(e=g[k]).callback.call(e.ctx);break;case 1:for(;++k<q;)(e=g[k]).callback.call(e.ctx,a[0]);break;case 2:for(;++k<q;)(e=g[k]).callback.call(e.ctx,a[0],a[1]);break;case 3:for(;++k<q;)(e=g[k]).callback.call(e.ctx,a[0],a[1],a[2]);break;default:for(;++k<q;)(e=g[k]).callback.apply(e.ctx,a)}},s=Backbone.Events={on:function(k,g,a){this._events||(this._events={});(this._events[k]||(this._events[k]=[])).push({callback:g,
context:a,ctx:a||this});return this},once:function(k,g,a){var e=this,q=_.once(function(){e.off(k,q);g.apply(this,arguments)});q._callback=g;this.on(k,q,a);return this},off:function(k,g,a){var e,q,l,m,A,s,B,w;if(!this._events)return this;if(!k&&!g&&!a)return this._events={},this;m=k?[k]:_.keys(this._events);A=0;for(s=m.length;A<s;A++)if(k=m[A],e=this._events[k]){l=[];if(g||a){B=0;for(w=e.length;B<w;B++)q=e[B],(g&&g!==(q.callback._callback||q.callback)||a&&a!==q.context)&&l.push(q)}this._events[k]=
l}return this},trigger:function(s){if(!this._events)return this;var g=k.call(arguments,1),a=this._events[s],e=this._events.all;a&&y(this,a,g);e&&y(this,e,arguments);return this},listenTo:function(k,g,a){var e=this._listeners||(this._listeners={}),q=k._listenerId||(k._listenerId=_.uniqueId("l"));e[q]=k;k.on(g,a||this,this);return this},stopListening:function(k,g,a){var e=this._listeners;if(e){if(k)k.off(g,a,this),!g&&!a&&delete e[k._listenerId];else{for(var q in e)e[q].off(null,null,this);this._listeners=
{}}return this}}};s.bind=s.on;s.unbind=s.off;"undefined"!==typeof exports&&("undefined"!==typeof module&&module.exports&&(exports=module.exports=s),exports.Backbone=exports.Backbone||Backbone)})();
(function(){function k(a){var e=(new Date).getTime(),g=Math.max(0,16-(e-s)),l=y.setTimeout(function(){a(e+g)},g);s=e+g;return l}var y=this,s=0,t=["ms","moz","webkit","o"];if("undefined"!==typeof exports)"undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports.requestAnimationFrame=k;else{for(var g=0;g<t.length&&!y.requestAnimationFrame;++g)y.requestAnimationFrame=y[t[g]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[t[g]+"CancelAnimationFrame"]||y[t[g]+"CancelRequestAnimationFrame"];
y.requestAnimationFrame||(y.requestAnimationFrame=k);y.cancelAnimationFrame||(y.cancelAnimationFrame=function(a){clearTimeout(a)})}})();
(function(){function k(){var a=document.body.getBoundingClientRect(),e=this.width=a.width,a=this.height=a.height;this.renderer.setSize(e,a,this.ratio);this.trigger(h.Events.resize,e,a)}var y=this,s=y.Two||{},t=Math.sin,g=Math.cos,a=Math.atan2,e=Math.sqrt,q=Math.PI,l=2*q,m=q/2,A=Math.pow,na=Math.min,B=Math.max,w=0,u={hasEventListeners:_.isFunction(y.addEventListener),bind:function(a,e,h,g){this.hasEventListeners?a.addEventListener(e,h,!!g):a.attachEvent("on"+e,h);return this},unbind:function(a,e,h,
g){this.hasEventListeners?a.removeEventListeners(e,h,!!g):a.detachEvent("on"+e,h);return this}},h=y.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:h.Types.svg,autostart:!1});_.each(a,function(a,j){"fullscreen"===j||("width"===j||"height"===j||"autostart"===j)||(this[j]=a)},this);_.isElement(a.domElement)&&(this.type=h.Types[a.domElement.tagName.toLowerCase()]);this.renderer=new h[this.type](this);h.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?
(a=_.bind(k,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),u.bind(y,"resize",a),a()):_.isElement(a.domElement)||(this.renderer.setSize(a.width,a.height,this.ratio),this.width=a.width,this.height=a.height);this.scene=this.renderer.scene;h.Instances.push(this)};_.extend(h,{Array:y.Float32Array||Array,Types:{webgl:"WebGLRenderer",
svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.4.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){y.Two=s;return this},uniqueId:function(){var a=w;w++;return a},Utils:{release:function(a){_.isObject(a)&&(_.isFunction(a.unbind)&&a.unbind(),
a.vertices&&(_.isFunction(a.vertices.unbind)&&a.vertices.unbind(),_.each(a.vertices,function(a){_.isFunction(a.unbind)&&a.unbind()})),a.children&&_.each(a.children,function(a){h.Utils.release(a)}))},Curve:{CollinearityEpsilon:A(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01},abscissas:[[0.5773502691896257],[0,0.7745966692414834],[0.33998104358485626,0.8611363115940526],[0,0.5384693101056831,0.906179845938664],[0.2386191860831969,0.6612093864662645,0.932469514203152],
[0,0.4058451513773972,0.7415311855993945,0.9491079123427585],[0.1834346424956498,0.525532409916329,0.7966664774136267,0.9602898564975363],[0,0.3242534234038089,0.6133714327005904,0.8360311073266358,0.9681602395076261],[0.14887433898163122,0.4333953941292472,0.6794095682990244,0.8650633666889845,0.9739065285171717],[0,0.26954315595234496,0.5190961292068118,0.7301520055740494,0.8870625997680953,0.978228658146057],[0.1252334085114689,0.3678314989981802,0.5873179542866175,0.7699026741943047,0.9041172563704749,
0.9815606342467192],[0,0.2304583159551348,0.44849275103644687,0.6423493394403402,0.8015780907333099,0.9175983992229779,0.9841830547185881],[0.10805494870734367,0.31911236892788974,0.5152486363581541,0.6872929048116855,0.827201315069765,0.9284348836635735,0.9862838086968123],[0,0.20119409399743451,0.3941513470775634,0.5709721726085388,0.7244177313601701,0.8482065834104272,0.937273392400706,0.9879925180204854],[0.09501250983763744,0.2816035507792589,0.45801677765722737,0.6178762444026438,0.755404408355003,
0.8656312023878318,0.9445750230732326,0.9894009349916499]],weights:[[1],[0.8888888888888888,0.5555555555555556],[0.6521451548625461,0.34785484513745385],[0.5688888888888889,0.47862867049936647,0.23692688505618908],[0.46791393457269104,0.3607615730481386,0.17132449237917036],[0.4179591836734694,0.3818300505051189,0.27970539148927664,0.1294849661688697],[0.362683783378362,0.31370664587788727,0.22238103445337448,0.10122853629037626],[0.3302393550012598,0.31234707704000286,0.26061069640293544,0.1806481606948574,
0.08127438836157441],[0.29552422471475287,0.26926671930999635,0.21908636251598204,0.1494513491505806,0.06667134430868814],[0.2729250867779006,0.26280454451024665,0.23319376459199048,0.18629021092773426,0.1255803694649046,0.05566856711617366],[0.24914704581340277,0.2334925365383548,0.20316742672306592,0.16007832854334622,0.10693932599531843,0.04717533638651183],[0.2325515532308739,0.22628318026289723,0.2078160475368885,0.17814598076194574,0.13887351021978725,0.09212149983772845,0.04048400476531588],
[0.2152638534631578,0.2051984637212956,0.18553839747793782,0.15720316715819355,0.12151857068790319,0.08015808715976021,0.03511946033175186],[0.2025782419255613,0.19843148532711158,0.1861610000155622,0.16626920581699392,0.13957067792615432,0.10715922046717194,0.07036604748810812,0.03075324199611727],[0.1894506104550685,0.18260341504492358,0.16915651939500254,0.14959598881657674,0.12462897125553388,0.09515851168249279,0.062253523938647894,0.027152459411754096]]},devicePixelRatio:y.devicePixelRatio||
1,getBackingStoreRatio:function(a){return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},getRatio:function(a){return h.Utils.devicePixelRatio/C(a)},setPlaying:function(a){this.playing=!!a;return this},getComputedMatrix:function(a,e){e=e&&e.identity()||new h.Matrix;for(var p=a,g=[];p&&p._matrix;)g.push(p._matrix),p=p.parent;g.reverse();_.each(g,function(a){a=a.elements;e.multiply(a[0],a[1],a[2],a[3],a[4],
a[5],a[6],a[7],a[8],a[9])});return e},deltaTransformPoint:function(a,e,p){return new h.Vector(e*a.a+p*a.c+0,e*a.b+p*a.d+0)},decomposeMatrix:function(a){var e=h.Utils.deltaTransformPoint(a,0,1),p=h.Utils.deltaTransformPoint(a,1,0),e=180/Math.PI*Math.atan2(e.y,e.x)-90,p=180/Math.PI*Math.atan2(p.y,p.x);return{translateX:a.e,translateY:a.f,scaleX:Math.sqrt(a.a*a.a+a.b*a.b),scaleY:Math.sqrt(a.c*a.c+a.d*a.d),skewX:e,skewY:p,rotation:e}},applySvgAttributes:function(a,e){var p={},g={},l,m,k;if(getComputedStyle){var q=
getComputedStyle(a);for(l=q.length;l--;)m=q[l],k=q[m],void 0!==k&&(g[m]=k)}for(l=a.attributes.length;l--;)k=a.attributes[l],p[k.nodeName]=k.value;_.isUndefined(g.opacity)||(g["stroke-opacity"]=g.opacity,g["fill-opacity"]=g.opacity);_.extend(g,p);g.visible=!(_.isUndefined(g.display)&&"none"===g.display)||_.isUndefined(g.visibility)&&"hidden"===g.visibility;for(m in g)switch(k=g[m],m){case "transform":if("none"===k)break;if(null===a.getCTM())break;p=h.Utils.decomposeMatrix(a.getCTM());e.translation.set(p.translateX,
p.translateY);e.rotation=p.rotation;e.scale=p.scaleX;g.x&&(e.translation.x=g.x);g.y&&(e.translation.y=g.y);break;case "visible":e.visible=k;break;case "stroke-linecap":e.cap=k;break;case "stroke-linejoin":e.join=k;break;case "stroke-miterlimit":e.miter=k;break;case "stroke-width":e.linewidth=parseFloat(k);break;case "stroke-opacity":case "fill-opacity":case "opacity":e.opacity=parseFloat(k);break;case "fill":case "stroke":e[m]="none"===k?"transparent":k;break;case "id":e.id=k;break;case "class":e.classList=
k.split(" ")}return e},read:{svg:function(){return h.Utils.read.g.apply(this,arguments)},g:function(a){var e=new h.Group;h.Utils.applySvgAttributes(a,e);for(var p=0,g=a.childNodes.length;p<g;p++){var l=a.childNodes[p],m=l.nodeName;if(!m)return;m=m.replace(/svg\:/ig,"").toLowerCase();m in h.Utils.read&&(l=h.Utils.read[m].call(this,l),e.add(l))}return e},polygon:function(a,e){var p=[];a.getAttribute("points").replace(/(-?[\d\.?]+),(-?[\d\.?]+)/g,function(a,e,j){p.push(new h.Anchor(parseFloat(e),parseFloat(j)))});
var g=(new h.Polygon(p,!e)).noStroke();g.fill="black";return h.Utils.applySvgAttributes(a,g)},polyline:function(a){return h.Utils.read.polygon(a,!0)},path:function(a){var e=a.getAttribute("d"),p=new h.Anchor,g,l,m=!1,k=!1,q=e.match(/[a-df-z][^a-df-z]*/ig),B=q.length-1;_.each(q.slice(0),function(a,e){var j=a[0],h=j.toLowerCase(),g=a.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),p=[],r;0>=e&&(q=[]);switch(h){case "h":case "v":1<g.length&&(r=1);break;case "m":case "l":case "t":2<g.length&&(r=2);break;
case "s":case "q":4<g.length&&(r=4);break;case "c":6<g.length&&(r=6)}if(r){for(var h=0,l=g.length,m=0;h<l;h+=r){var k=j;if(0<m)switch(j){case "m":k="l";break;case "M":k="L"}p.push([k].concat(g.slice(h,h+r)).join(" "));m++}q=Array.prototype.concat.apply(q,p)}else q.push(a)});e=_.flatten(_.map(q,function(a,e){var j,r,q=a[0],u=q.toLowerCase();l=a.slice(1).trim();l=l.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(a,e,j){return parseFloat(e)*A(10,j)});l=l.split(/[\s,]+|(?=\s?[+\-])/);k=q===u;var s,
w,x,z;switch(u){case "z":e>=B?m=!0:(r=p.x,j=p.y,j=new h.Anchor(r,j,void 0,void 0,void 0,void 0,h.Commands.close));break;case "m":case "l":r=parseFloat(l[0]);j=parseFloat(l[1]);j=new h.Anchor(r,j,void 0,void 0,void 0,void 0,"m"===u?h.Commands.move:h.Commands.line);k&&j.addSelf(p);p=j;break;case "h":case "v":r="h"===u?"x":"y";q="x"===r?"y":"x";j=new h.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,h.Commands.line);j[r]=parseFloat(l[0]);j[q]=p[q];k&&(j[r]+=p[r]);p=j;break;case "c":case "s":j=p.x;q=
p.y;g||(g=new h.Vector);"c"===u?(s=parseFloat(l[0]),r=parseFloat(l[1]),u=parseFloat(l[2]),w=parseFloat(l[3]),x=parseFloat(l[4]),z=parseFloat(l[5])):(w=ga(p,g,k),s=w.x,r=w.y,u=parseFloat(l[0]),w=parseFloat(l[1]),x=parseFloat(l[2]),z=parseFloat(l[3]));k&&(s+=j,r+=q,u+=j,w+=q,x+=j,z+=q);_.isObject(p.controls)||h.Anchor.AppendCurveProperties(p);p.controls.right.set(s-p.x,r-p.y);p=j=new h.Anchor(x,z,u-x,w-z,void 0,void 0,h.Commands.curve);g=j.controls.left;break;case "t":case "q":j=p.x;q=p.y;g||(g=new h.Vector);
g.isZero()?(s=j,r=q):(s=g.x,q=g.y);"q"===u?(u=parseFloat(l[0]),w=parseFloat(l[1]),x=parseFloat(l[1]),z=parseFloat(l[2])):(w=ga(p,g,k),u=w.x,w=w.y,x=parseFloat(l[0]),z=parseFloat(l[1]));k&&(s+=j,r+=q,u+=j,w+=q,x+=j,z+=q);_.isObject(p.controls)||h.Anchor.AppendCurveProperties(p);p.controls.right.set(s-p.x,r-p.y);p=j=new h.Anchor(x,z,u-x,w-z,void 0,void 0,h.Commands.curve);g=j.controls.left;break;case "a":throw new h.Utils.Error("not yet able to interpret Elliptical Arcs.");}return j}));if(!(1>=e.length))return e=
_.compact(e),e=(new h.Polygon(e,m,void 0,!0)).noStroke(),e.fill="black",h.Utils.applySvgAttributes(a,e)},circle:function(a){var e=parseFloat(a.getAttribute("cx")),p=parseFloat(a.getAttribute("cy")),m=parseFloat(a.getAttribute("r")),k=h.Resolution,q=_.map(_.range(k),function(a){var e=a/k*l;a=m*g(e);e=m*t(e);return new h.Anchor(a,e)},this),q=(new h.Polygon(q,!0,!0)).noStroke();q.translation.set(e,p);q.fill="black";return h.Utils.applySvgAttributes(a,q)},ellipse:function(a){var e=parseFloat(a.getAttribute("cx")),
p=parseFloat(a.getAttribute("cy")),m=parseFloat(a.getAttribute("rx")),k=parseFloat(a.getAttribute("ry")),q=h.Resolution,A=_.map(_.range(q),function(a){var e=a/q*l;a=m*g(e);e=k*t(e);return new h.Anchor(a,e)},this),A=(new h.Polygon(A,!0,!0)).noStroke();A.translation.set(e,p);A.fill="black";return h.Utils.applySvgAttributes(a,A)},rect:function(a){var e=parseFloat(a.getAttribute("x")),g=parseFloat(a.getAttribute("y")),l=parseFloat(a.getAttribute("width")),m=parseFloat(a.getAttribute("height")),l=l/2,
m=m/2,k=[new h.Anchor(l,m),new h.Anchor(-l,m),new h.Anchor(-l,-m),new h.Anchor(l,-m)],k=(new h.Polygon(k,!0)).noStroke();k.translation.set(e+l,g+m);k.fill="black";return h.Utils.applySvgAttributes(a,k)},line:function(a){var e=parseFloat(a.getAttribute("x1")),g=parseFloat(a.getAttribute("y1")),l=parseFloat(a.getAttribute("x2")),m=parseFloat(a.getAttribute("y2")),l=(l-e)/2,m=(m-g)/2,k=[new h.Anchor(-l,-m),new h.Anchor(l,m)],k=(new h.Polygon(k)).noFill();k.translation.set(e+l,g+m);return h.Utils.applySvgAttributes(a,
k)}},subdivide:function(a,e,g,l,m,k,q,A,u){u=u||h.Utils.Curve.RecursionLimit;var w=u+1;return a===q&&e===A?[new h.Anchor(q,A)]:_.map(_.range(0,w),function(u){var s=u/w;u=ha(s,a,g,m,q);s=ha(s,e,l,k,A);return new h.Anchor(u,s)})},getPointOnCubicBezier:function(a,e,h,g,l){var m=1-a;return m*m*m*e+3*m*m*a*h+3*m*a*a*g+a*a*a*l},getCurveLength:function(a,g,l,m,k,q,A,u,w){if(a===l&&g===m&&k===A&&q===u)return a=A-a,g=u-g,e(a*a+g*g);var s=9*(l-k)+3*(A-a),B=6*(a+k)-12*l,x=3*(l-a),z=9*(m-q)+3*(u-g),na=6*(g+q)-
12*m,t=3*(m-g);return O(function(a){var j=(s*a+B)*a+x;a=(z*a+na)*a+t;return e(j*j+a*a)},0,1,w||h.Utils.Curve.RecursionLimit)},integrate:function(a,e,g,l){var m=h.Utils.Curve.abscissas[l-2],k=h.Utils.Curve.weights[l-2];g=0.5*(g-e);e=g+e;var q=0,A=l+1>>1;for(l=l&1?k[q++]*a(e):0;q<A;){var u=g*m[q];l+=k[q++]*(a(e+u)+a(e-u))}return g*l},getCurveFromPoints:function(a,e){for(var g=a.length,l=g-1,m=0;m<g;m++){var k=a[m];_.isObject(k.controls)||h.Anchor.AppendCurveProperties(k);var q=e?K(m-1,g):B(m-1,0),A=
e?K(m+1,g):na(m+1,l);D(a[q],k,a[A]);k._command=0===m?h.Commands.move:h.Commands.curve;k.controls.left.x=_.isNumber(k.controls.left.x)?k.controls.left.x:k.x;k.controls.left.y=_.isNumber(k.controls.left.y)?k.controls.left.y:k.y;k.controls.right.x=_.isNumber(k.controls.right.x)?k.controls.right.x:k.x;k.controls.right.y=_.isNumber(k.controls.right.y)?k.controls.right.y:k.y}},getControlPoints:function(a,e,l){var k=ca(a,e),A=ca(l,e);a=z(a,e);l=z(l,e);var u=(k+A)/2;e.u=_.isObject(e.controls.left)?e.controls.left:
new h.Vector(0,0);e.v=_.isObject(e.controls.right)?e.controls.right:new h.Vector(0,0);if(1E-4>a||1E-4>l)return e._relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e;a*=0.33;l*=0.33;u=A<k?u+m:u-m;e.controls.left.x=g(u)*a;e.controls.left.y=t(u)*a;u-=q;e.controls.right.x=g(u)*l;e.controls.right.y=t(u)*l;e._relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y);return e},getReflection:function(a,e,g){return new h.Vector(2*a.x-(e.x+a.x)-(g?
a.x:0),2*a.y-(e.y+a.y)-(g?a.y:0))},angleBetween:function(e,h){var g,l;if(4<=arguments.length)return g=arguments[0]-arguments[2],l=arguments[1]-arguments[3],a(l,g);g=e.x-h.x;l=e.y-h.y;return a(l,g)},distanceBetweenSquared:function(a,e){var h=a.x-e.x,g=a.y-e.y;return h*h+g*g},distanceBetween:function(a,h){return e(x(a,h))},toFixed:function(a){return Math.floor(1E3*a)/1E3},mod:function(a,e){for(;0>a;)a+=e;return a%e},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,
arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});h.Utils.Error.prototype=Error();h.Utils.Error.prototype.constructor=h.Utils.Error;h.Utils.Collection.prototype=[];h.Utils.Collection.constructor=h.Utils.Collection;_.extend(h.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=Array.prototype.pop.apply(this,arguments);this.trigger(h.Events.remove,[a]);return a},shift:function(){var a=
Array.prototype.shift.apply(this,arguments);this.trigger(h.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(h.Events.insert,arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(h.Events.insert,arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),e;this.trigger(h.Events.remove,a);2<arguments.length&&(e=this.slice(arguments[0],arguments.length-2),this.trigger(h.Events.insert,
e));return a}});var z=h.Utils.distanceBetween,x=h.Utils.distanceBetweenSquared,ca=h.Utils.angleBetween,D=h.Utils.getControlPoints,K=h.Utils.mod,C=h.Utils.getBackingStoreRatio,ha=h.Utils.getPointOnCubicBezier,O=h.Utils.integrate,ga=h.Utils.getReflection;_.extend(h.prototype,Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);return this},play:function(){h.Utils.setPlaying.call(this,!0);return this.trigger(h.Events.play)},pause:function(){this.playing=!1;return this.trigger(h.Events.pause)},
update:function(){var a=!!this._lastFrame,e=(y.performance&&y.performance.now?y.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3)));this._lastFrame=e;var a=this.width,e=this.height,g=this.renderer;(a!==g.width||e!==g.height)&&g.setSize(a,e,this.ratio);this.trigger(h.Events.update,this.frameCount,this.timeDelta);return this.render()},render:function(){this.renderer.render();return this.trigger(h.Events.render,this.frameCount)},add:function(a){var e=
a;_.isArray(a)||(e=_.toArray(arguments));this.scene.add(e);return this},remove:function(a){var e=a;_.isArray(a)||(e=_.toArray(arguments));this.scene.remove(e);return this},clear:function(){this.scene.remove(_.toArray(this.scene.children));return this},makeLine:function(a,e,g,l){g=(g-a)/2;l=(l-e)/2;var m=[new h.Anchor(-g,-l),new h.Anchor(g,l)],m=(new h.Polygon(m)).noFill();m.translation.set(a+g,e+l);this.scene.add(m);return m},makeRectangle:function(a,e,g,l){g/=2;l/=2;l=[new h.Anchor(-g,-l),new h.Anchor(g,
-l),new h.Anchor(g,l),new h.Anchor(-g,l)];l=new h.Polygon(l,!0);l.translation.set(a,e);this.scene.add(l);return l},makeCircle:function(a,e,h){return this.makeEllipse(a,e,h,h)},makeEllipse:function(a,e,m,k){var q=h.Resolution,A=_.map(_.range(q),function(a){var e=a/q*l;a=m*g(e);e=k*t(e);return new h.Anchor(a,e)},this),A=new h.Polygon(A,!0,!0);A.translation.set(a,e);this.scene.add(A);return A},makeCurve:function(a){var e=arguments.length,g=a;if(!_.isArray(a))for(var g=[],l=0;l<e;l+=2){var m=arguments[l];
if(!_.isNumber(m))break;g.push(new h.Anchor(m,arguments[l+1]))}var e=arguments[e-1],g=new h.Polygon(g,!(_.isBoolean(e)&&e),!0),e=g.getBoundingClientRect(),k=e.left+e.width/2,q=e.top+e.height/2;_.each(g.vertices,function(a){a.x-=k;a.y-=q});g.translation.set(k,q);this.scene.add(g);return g},makePolygon:function(a){var e=arguments.length,g=a;if(!_.isArray(a))for(var g=[],l=0;l<e;l+=2){var m=arguments[l];if(!_.isNumber(m))break;g.push(new h.Anchor(m,arguments[l+1]))}e=arguments[e-1];g=new h.Polygon(g,
!(_.isBoolean(e)&&e));e=g.getBoundingClientRect();g.center().translation.set(e.left+e.width/2,e.top+e.height/2);this.scene.add(g);return g},makeGroup:function(a){var e=a;_.isArray(a)||(e=_.toArray(arguments));var g=new h.Group;this.scene.add(g);g.add(e);return g},interpret:function(a,e){var g=a.tagName.toLowerCase();if(!(g in h.Utils.read))return null;g=h.Utils.read[g].call(this,a);e&&g instanceof h.Group?this.add(_.values(g.children)):this.add(g);return g}});(function(){requestAnimationFrame(arguments.callee);
h.Instances.forEach(function(a){a.playing&&a.update()})})();"function"===typeof define&&define.amd?define(function(){return h}):"undefined"!=typeof module&&module.exports&&(module.exports=h)})();
(function(k){var y=k.Vector=function(a,e){this.x=a||0;this.y=e||0};_.extend(y,{zero:new k.Vector});_.extend(y.prototype,Backbone.Events,{set:function(a,e){this.x=a;this.y=e;return this},copy:function(a){this.x=a.x;this.y=a.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new y(this.x,this.y)},add:function(a,e){this.x=a.x+e.x;this.y=a.y+e.y;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;return this},sub:function(a,e){this.x=a.x-e.x;this.y=a.y-e.y;return this},
subSelf:function(a){this.x-=a.x;this.y-=a.y;return this},multiplySelf:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},
distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var e=this.x-a.x;a=this.y-a.y;return e*e+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a){return 1E-4>this.distanceTo(a)},lerp:function(a,e){return this.set((a.x-this.x)*e+this.x,(a.y-this.y)*e+this.y)},isZero:function(){return 1E-4>this.length()},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var s={set:function(a,
e){this._x=a;this._y=e;return this.trigger(k.Events.change)},copy:function(a){this._x=a.x;this._y=a.y;return this.trigger(k.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(k.Events.change)},clone:function(){return new y(this._x,this._y)},add:function(a,e){this._x=a.x+e.x;this._y=a.y+e.y;return this.trigger(k.Events.change)},addSelf:function(a){this._x+=a.x;this._y+=a.y;return this.trigger(k.Events.change)},sub:function(a,e){this._x=a.x-e.x;this._y=a.y-e.y;return this.trigger(k.Events.change)},
subSelf:function(a){this._x-=a.x;this._y-=a.y;return this.trigger(k.Events.change)},multiplySelf:function(a){this._x*=a.x;this._y*=a.y;return this.trigger(k.Events.change)},multiplyScalar:function(a){this._x*=a;this._y*=a;return this.trigger(k.Events.change)},divideScalar:function(a){return a?(this._x/=a,this._y/=a,this.trigger(k.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this._x*a.x+this._y*a.y},lengthSquared:function(){return this._x*this._x+
this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var e=this._x-a.x;a=this._y-a.y;return e*e+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a){return 1E-4>this.distanceTo(a)},lerp:function(a,e){return this.set((a.x-this._x)*e+this._x,(a.y-this._y)*e+this._y)},isZero:function(){return 1E-4>
this.length()},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},t={get:function(){return this._x},set:function(a){this._x=a;this.trigger(k.Events.change,"x")}},g={get:function(){return this._y},set:function(a){this._y=a;this.trigger(k.Events.change,"y")}};k.Vector.prototype.bind=k.Vector.prototype.on=function(){this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",t),Object.defineProperty(this,"y",g),_.extend(this,s),this._bound=
!0);Backbone.Events.bind.apply(this,arguments);return this}})(Two);
(function(k){var y=k.Commands,s=k.Anchor=function(g,a,e,q,l,m,A){k.Vector.call(this,g,a);this._broadcast=_.bind(function(){this.trigger(k.Events.change)},this);this._command=A||y.move;this._relative=!0;if(!A)return this;s.AppendCurveProperties(this);_.isNumber(e)&&(this.controls.left.x=e);_.isNumber(q)&&(this.controls.left.y=q);_.isNumber(l)&&(this.controls.right.x=l);_.isNumber(m)&&(this.controls.right.y=m)};_.extend(s,{AppendCurveProperties:function(g){g.controls={left:new k.Vector(0,0),right:new k.Vector(0,
0)}}});var t={listen:function(){_.isObject(this.controls)||s.AppendCurveProperties(this);this.controls.left.bind(k.Events.change,this._broadcast);this.controls.right.bind(k.Events.change,this._broadcast);return this},ignore:function(){this.controls.left.unbind(k.Events.change,this._broadcast);this.controls.right.unbind(k.Events.change,this._broadcast);return this},clone:function(){var g=this.controls,g=new k.Anchor(this.x,this.y,g&&g.left.x,g&&g.left.y,g&&g.right.x,g&&g.right.y,this.command);g.relative=
this._relative;return g},toObject:function(){var g={x:this.x,y:this.y};this._command&&(g.command=this._command);this._relative&&(g.relative=this._relative);this.controls&&(g.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()});return g}};Object.defineProperty(s.prototype,"command",{get:function(){return this._command},set:function(g){this._command=g;this._command===y.curve&&!_.isObject(this.controls)&&s.AppendCurveProperties(this);return this.trigger(k.Events.change)}});
Object.defineProperty(s.prototype,"relative",{get:function(){return this._relative},set:function(g){if(this._relative==g)return this;this._relative=!!g;return this.trigger(k.Events.change)}});_.extend(s.prototype,k.Vector.prototype,t);k.Anchor.prototype.bind=k.Anchor.prototype.on=function(){k.Vector.prototype.bind.apply(this,arguments);_.extend(this,t)};k.Anchor.prototype.unbind=k.Anchor.prototype.off=function(){k.Vector.prototype.unbind.apply(this,arguments);_.extend(this,t)}})(Two);
(function(k){var y=Math.cos,s=Math.sin,t=Math.tan,g=k.Matrix=function(a,e,g,l,m,A){this.elements=new k.Array(9);var s=a;_.isArray(s)||(s=_.toArray(arguments));this.identity().set(s)};_.extend(g,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(a,e,g){if(3>=e.length){g=e[0]||0;var l=e[1]||0;e=e[2]||0;return{x:a[0]*g+a[1]*l+a[2]*e,y:a[3]*g+a[4]*l+a[5]*e,z:a[6]*g+a[7]*l+a[8]*e}}var l=a[0],m=a[1],A=a[2],s=a[3],B=a[4],w=a[5],u=a[6],h=a[7];a=a[8];var z=e[0],x=e[1],t=e[2],y=e[3],K=e[4],C=e[5],ha=e[6],O=e[7];
e=e[8];g=g||new k.Array(9);g[0]=l*z+m*y+A*ha;g[1]=l*x+m*K+A*O;g[2]=l*t+m*C+A*e;g[3]=s*z+B*y+w*ha;g[4]=s*x+B*K+w*O;g[5]=s*t+B*C+w*e;g[6]=u*z+h*y+a*ha;g[7]=u*x+h*K+a*O;g[8]=u*t+h*C+a*e;return g}});_.extend(g.prototype,Backbone.Events,{set:function(a){var e=a;_.isArray(e)||(e=_.toArray(arguments));_.extend(this.elements,e);return this.trigger(k.Events.change)},identity:function(){this.set(g.Identity);return this},multiply:function(a,e,g,l,m,A,s,B,w){var u=arguments,h=u.length;if(1>=h)return _.each(this.elements,
function(e,g){this.elements[g]=e*a},this),this.trigger(k.Events.change);if(3>=h)return a=a||0,e=e||0,g=g||0,m=this.elements,{x:m[0]*a+m[1]*e+m[2]*g,y:m[3]*a+m[4]*e+m[5]*g,z:m[6]*a+m[7]*e+m[8]*g};var z=this.elements,x=u,u=z[0],h=z[1],t=z[2],y=z[3],K=z[4],C=z[5],ha=z[6],O=z[7],z=z[8],ga=x[0],j=x[1],r=x[2],p=x[3],G=x[4],aa=x[5],S=x[6],Z=x[7],x=x[8];this.elements[0]=u*ga+h*p+t*S;this.elements[1]=u*j+h*G+t*Z;this.elements[2]=u*r+h*aa+t*x;this.elements[3]=y*ga+K*p+C*S;this.elements[4]=y*j+K*G+C*Z;this.elements[5]=
y*r+K*aa+C*x;this.elements[6]=ha*ga+O*p+z*S;this.elements[7]=ha*j+O*G+z*Z;this.elements[8]=ha*r+O*aa+z*x;return this.trigger(k.Events.change)},inverse:function(a){var e=this.elements;a=a||new k.Matrix;var g=e[0],l=e[1],m=e[2],A=e[3],s=e[4],B=e[5],w=e[6],u=e[7],e=e[8],h=e*s-B*u,z=-e*A+B*w,x=u*A-s*w,t=g*h+l*z+m*x;if(!t)return null;t=1/t;a.elements[0]=h*t;a.elements[1]=(-e*l+m*u)*t;a.elements[2]=(B*l-m*s)*t;a.elements[3]=z*t;a.elements[4]=(e*g-m*w)*t;a.elements[5]=(-B*g+m*A)*t;a.elements[6]=x*t;a.elements[7]=
(-u*g+l*w)*t;a.elements[8]=(s*g-l*A)*t;return a},scale:function(a,e){1>=arguments.length&&(e=a);return this.multiply(a,0,0,0,e,0,0,0,1)},rotate:function(a){var e=y(a);a=s(a);return this.multiply(e,-a,0,a,e,0,0,0,1)},translate:function(a,e){return this.multiply(1,0,a,0,1,e,0,0,1)},skewX:function(a){a=t(a);return this.multiply(1,a,0,0,1,0,0,0,1)},skewY:function(a){a=t(a);return this.multiply(1,0,0,a,1,0,0,0,1)},toString:function(a){var e=[];this.toArray(a,e);return e.join(" ")},toArray:function(a,e){var g=
this.elements,l=!!e,m=parseFloat(g[0].toFixed(3)),k=parseFloat(g[1].toFixed(3)),s=parseFloat(g[2].toFixed(3)),B=parseFloat(g[3].toFixed(3)),w=parseFloat(g[4].toFixed(3)),u=parseFloat(g[5].toFixed(3));if(a){var h=parseFloat(g[6].toFixed(3)),t=parseFloat(g[7].toFixed(3)),g=parseFloat(g[8].toFixed(3));if(l){e[0]=m;e[1]=B;e[2]=h;e[3]=k;e[4]=w;e[5]=t;e[6]=s;e[7]=u;e[8]=g;return}return[m,B,h,k,w,t,s,u,g]}if(l)e[0]=m,e[1]=B,e[2]=k,e[3]=w,e[4]=s,e[5]=u;else return[m,B,k,w,s,u]},clone:function(){return new k.Matrix(this.elements[0],
this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],this.elements[6],this.elements[7],this.elements[8])}})})(Two);
(function(k){var y=k.Utils.mod,s=k.Utils.toFixed,t={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(a,e){var g=document.createElementNS(this.ns,a);"svg"===a&&(e=_.defaults(e||{},{version:this.version}));_.isObject(e)&&t.setAttributes(g,e);return g},setAttributes:function(a,e){for(var g in e)a.setAttribute(g,e[g]);return this},removeAttributes:function(a,e){for(var g in e)a.removeAttribute(g);return this},toString:function(a,e){for(var g=a.length,
l=g-1,m,A="",t=0;t<g;t++){var B=a[t],w,u=e?y(t-1,g):Math.max(t-1,0),h=e?y(t+1,g):Math.min(t+1,l);w=a[u];var z=a[h],x,ca,D,u=s(B._x),z=s(B._y);switch(B._command){case k.Commands.close:w=k.Commands.close;break;case k.Commands.curve:x=w.controls&&w.controls.right||w;D=B.controls&&B.controls.left||B;w._relative?(h=s(x.x+w.x),x=s(x.y+w.y)):(h=s(x.x),x=s(x.y));B._relative?(ca=s(D.x+B.x),D=s(D.y+B.y)):(ca=s(D.x),D=s(D.y));w=(0===t?k.Commands.move:k.Commands.curve)+" "+h+" "+x+" "+ca+" "+D+" "+u+" "+z;break;
case k.Commands.move:m=B;w=k.Commands.move+" "+u+" "+z;break;default:w=B._command+" "+u+" "+z}t>=l&&e&&(B._command===k.Commands.curve&&(z=m,x=B.controls&&B.controls.right||B,u=z.controls&&z.controls.left||z,B._relative?(h=s(x.x+B.x),x=s(x.y+B.y)):(h=s(x.x),x=s(x.y)),z._relative?(ca=s(u.x+z.x),D=s(u.y+z.y)):(ca=s(u.x),D=s(u.y)),u=s(z.x),z=s(z.y),w+=" C "+h+" "+x+" "+ca+" "+D+" "+u+" "+z),w+=" Z");A+=w+" "}return A},getClip:function(a){clip=a._renderer.clip;if(!clip){for(root=a;root.parent;)root=root.parent;
clip=a._renderer.clip=t.createElement("clipPath");root.defs.appendChild(clip)}return clip},group:{appendChild:function(a){if(a=this.domElement.querySelector("#"+a)){var e=a.nodeName;e&&(e=e.replace(/svg\:/ig,"").toLowerCase(),/clippath/.test(e)||this.elem.appendChild(a))}},removeChild:function(a){if(a=this.domElement.querySelector("#"+a)){var e=a.nodeName;e&&(e=e.replace(/svg\:/ig,"").toLowerCase(),/clippath/.test(e)||this.elem.removeChild(a))}},renderChild:function(a){t[a._renderer.type].render.call(a,
this)},render:function(a){this._update();if(0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=t.createElement("g",{id:this.id}),a.appendChild(this._renderer.elem));var e={domElement:a,elem:this._renderer.elem};(this._matrix.manual||this._flagMatrix)&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var g in this.children){var l=this.children[g];t[l._renderer.type].render.call(l,a)}this._flagOpacity&&this._renderer.elem.setAttribute("opacity",
this._opacity);this._flagAdditions&&_.each(this.additions,t.group.appendChild,e);this._flagSubtractions&&_.each(this.subtractions,t.group.removeChild,e);this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path"));return this.flagReset()}},polygon:{render:function(a){this._update();if(0===this._opacity&&!this._flagOpacity)return this;var e={};if(this._matrix.manual||this._flagMatrix)e.transform="matrix("+this._matrix.toString()+
")";if(this._flagVertices){var g=t.toString(this._vertices,this._closed);e.d=g}this._flagFill&&(e.fill=this._fill);this._flagStroke&&(e.stroke=this._stroke);this._flagLinewidth&&(e["stroke-width"]=this._linewidth);this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity);this._flagVisible&&(e.visibility=this._visible?"visible":"hidden");this._flagCap&&(e["stroke-linecap"]=this._cap);this._flagJoin&&(e["stroke-linejoin"]=this._join);this._flagMiter&&(e["stroke-miterlimit"]=
this.miter);this._renderer.elem?t.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=t.createElement("path",e),a.appendChild(this._renderer.elem));this._flagClip&&(clip=t.getClip(this),elem=this._renderer.elem,this._clip?(elem.removeAttribute("id"),clip.setAttribute("id",this.id),clip.appendChild(elem)):(clip.removeAttribute("id"),elem.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(elem)));return this.flagReset()}}},g=k[k.Types.svg]=function(a){this.domElement=
a.domElement||t.createElement("svg");this.scene=new k.Group;this.scene.parent=this;this.defs=t.createElement("defs");this.domElement.appendChild(this.defs)};_.extend(g,{Utils:t});_.extend(g.prototype,Backbone.Events,{setSize:function(a,e){this.width=a;this.height=e;t.setAttributes(this.domElement,{width:a,height:e});return this},render:function(){t.group.render.call(this.scene,this.domElement);return this}})})(Two);
(function(k){var y=k.Shape=function(){this._renderer={};this.id=k.Identifier+k.uniqueId();this.classList=[];this._matrix=new k.Matrix;this.translation=new k.Vector;this.translation.bind(k.Events.change,_.bind(y.FlagMatrix,this));this.rotation=0;this.scale=1};_.extend(y,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(k){Object.defineProperty(k,"rotation",{get:function(){return this._rotation},set:function(k){this._rotation=k;this._flagMatrix=!0}});Object.defineProperty(k,
"scale",{get:function(){return this._scale},set:function(k){this._scale=k;this._flagScale=this._flagMatrix=!0}})}});_.extend(y.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(k){k.add(this);return this},clone:function(){var k=new y;k.translation.copy(this.translation);k.rotation=this.rotation;k.scale=this.scale;_.each(y.Properties,function(t){k[t]=this[t]},this);return k._update()},replaceParent:function(k){var t=this.id,g;this.parent&&(delete this.parent.children[t],g=_.indexOf(parent.additions,
t),0<=g&&this.parent.additions.splice(g,1),this.parent.subtractions.push(t),this._flagSubtractions=!0);k?(k.children[t]=this,this.parent=k,k.additions.push(t),k._flagAdditions=!0):delete this.parent;return this},_update:function(k){!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation);k&&this.parent&&this.parent._update&&this.parent._update();return this},flagReset:function(){this._flagMatrix=this._flagScale=
!1;return this}});y.MakeObservable(y.prototype)})(Two);
(function(k){function y(a,e,g){var q,s,w,u,h,t,x,y,D=e.controls&&e.controls.right,K=a.controls&&a.controls.left;q=e.x;h=e.y;s=(D||e).x;t=(D||e).y;w=(K||a).x;x=(K||a).y;u=a.x;y=a.y;D&&e._relative&&(s+=e.x,t+=e.y);K&&a._relative&&(w+=a.x,x+=a.y);return k.Utils.getCurveLength(q,h,s,t,w,x,u,y,g)}function s(a,e,g){var q,s,t,u,h,z,x,y,D=e.controls&&e.controls.right,K=a.controls&&a.controls.left;q=e.x;h=e.y;s=(D||e).x;z=(D||e).y;t=(K||a).x;x=(K||a).y;u=a.x;y=a.y;D&&e._relative&&(s+=e.x,z+=e.y);K&&a._relative&&
(t+=a.x,x+=a.y);return k.Utils.subdivide(q,h,s,z,t,x,u,y,g)}var t=Math.min,g=Math.max,a=Math.round,e=k.Utils.getComputedMatrix;_.each(k.Commands,function(){});var q=k.Polygon=function(a,e,g,q){k.Shape.call(this);this._renderer.type="polygon";this._closed=!!e;this._curved=!!g;this.beginning=0;this.ending=1;this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.cap="butt";this.join="miter";this.miter=4;this._vertices=[];this.vertices=a;this.automatic=!q};_.extend(q,{Properties:"fill stroke linewidth opacity visible cap join miter closed curved automatic beginning ending".split(" "),
FlagVertices:function(){this._flagLength=this._flagVertices=!0},MakeObservable:function(a){k.Shape.MakeObservable(a);_.each(q.Properties.slice(0,8),function(e){var g="_"+e,k="_flag"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(a,e,{get:function(){return this[g]},set:function(a){this[g]=a;this[k]=!0}})});Object.defineProperty(a,"length",{get:function(){this._flagLength&&this._updateLength();return this._length}});Object.defineProperty(a,"closed",{get:function(){return this._closed},set:function(a){this._closed=
!!a;this._flagVertices=!0}});Object.defineProperty(a,"curved",{get:function(){return this._curved},set:function(a){this._curved=!!a;this._flagVertices=!0}});Object.defineProperty(a,"automatic",{get:function(){return this._automatic},set:function(a){if(a!==this._automatic){var e=(this._automatic=!!a)?"ignore":"listen";_.each(this.vertices,function(a){a[e]()})}}});Object.defineProperty(a,"beginning",{get:function(){return this._beginning},set:function(a){this._beginning=t(g(a,0),this._ending);this._flagVertices=
!0}});Object.defineProperty(a,"ending",{get:function(){return this._ending},set:function(a){this._ending=t(g(a,this._beginning),1);this._flagVertices=!0}});Object.defineProperty(a,"vertices",{get:function(){return this._collection},set:function(a){var e=_.bind(q.FlagVertices,this),g=_.bind(function(a){for(var g=a.length;g--;)a[g].bind(k.Events.change,e);e()},this),l=_.bind(function(a){_.each(a,function(a){a.unbind(k.Events.change,e)},this);e()},this);this._collection&&this._collection.unbind();this._collection=
new k.Utils.Collection(a.slice(0));this._collection.bind(k.Events.insert,g);this._collection.bind(k.Events.remove,l);g(this._collection)}});Object.defineProperty(a,"clip",{get:function(){return this._clip},set:function(a){this._clip=a;this._flagClip=!0}})}});_.extend(q.prototype,k.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,
_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(a){a=a||this.parent;var e=_.map(this.vertices,function(a){return a.clone()}),g=new q(e,this.closed,this.curved,!this.automatic);_.each(k.Shape.Properties,function(a){g[a]=this[a]},this);g.translation.copy(this.translation);g.rotation=this.rotation;g.scale=this.scale;a.add(g);return g},toObject:function(){var a={vertices:_.map(this.vertices,function(a){return a.toObject()})};
_.each(k.Shape.Properties,function(e){a[e]=this[e]},this);a.translation=this.translation.toObject;a.rotation=this.rotation;a.scale=this.scale;return a},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},corner:function(){var a=this.getBoundingClientRect(!0);a.centroid={x:a.left+a.width/2,y:a.top+a.height/2};_.each(this.vertices,function(e){e.addSelf(a.centroid)});return this},center:function(){var a=this.getBoundingClientRect(!0);a.centroid=
{x:a.left+a.width/2,y:a.top+a.height/2};_.each(this.vertices,function(e){e.subSelf(a.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(a){this._update(!0);var k=a?this._matrix:e(this),q=this.linewidth/2,s,B,w=Infinity,u=-Infinity,h=Infinity,z=-Infinity;_.each(this._vertices,function(a){s=a.x;B=a.y;a=k.multiply(s,B,1);h=t(a.y-q,h);w=t(a.x-q,w);u=g(a.x+q,u);z=g(a.y+q,z)});return{top:h,left:w,right:u,bottom:z,width:u-
w,height:z-h}},getPointAt:function(a,e){var g,q,s,t,u,h,z,x,y,D,K,C;z=this.length*Math.min(Math.max(a,0),1);x=this.vertices.length;y=x-1;h=g=null;D=0;q=this._lengths.length;for(s=0;D<q;D++){if(s+this._lengths[D]>z){g=this.vertices[this.closed?k.Utils.mod(D,x):D];h=this.vertices[Math.min(Math.max(D-1,0),y)];z-=s;a=z/this._lengths[D];break}s+=this._lengths[D]}if(_.isNull(g)||_.isNull(h))return null;C=h.controls&&h.controls.right;K=g.controls&&g.controls.left;q=h.x;z=h.y;s=(C||h).x;x=(C||h).y;t=(K||
g).x;y=(K||g).y;u=g.x;D=g.y;C&&h._relative&&(s+=h.x,x+=h.y);K&&g._relative&&(t+=g.x,y+=g.y);g=k.Utils.getPointOnCubicBezier(a,q,s,t,u);h=k.Utils.getPointOnCubicBezier(a,z,x,y,D);return _.isObject(e)?(e.x=g,e.y=h,e):new k.Vector(g,h)},plot:function(){if(this.curved)return k.Utils.getCurveFromPoints(this._vertices,this.closed),this;for(var a=0;a<this._vertices.length;a++)this._vertices[a]._command=0===a?k.Commands.move:k.Commands.line;return this},subdivide:function(a){this._update();var e=this.vertices.length-
1,g=this.vertices[e],q=this._closed||this.vertices[e]._command===k.Commands.close,t=[];_.each(this.vertices,function(w,u){if(!(0>=u)||q)if(w.command===k.Commands.move)t.push(new k.Anchor(g.x,g.y)),0<u&&(t[t.length-1].command=k.Commands.line);else{var h=s(w,g,a);t=t.concat(h);_.each(h,function(a,e){a.command=0>=e&&g.command===k.Commands.move?k.Commands.move:k.Commands.line});u>=e&&(this._closed&&this._automatic?(g=w,h=s(w,g,a),t=t.concat(h),_.each(h,function(a,e){a.command=0>=e&&g.command===k.Commands.move?
k.Commands.move:k.Commands.line})):q&&t.push(new k.Anchor(w.x,w.y)),t[t.length-1].command=q?k.Commands.close:k.Commands.line)}g=w},this);this._curved=this._automatic=!1;this.vertices=t;return this},_updateLength:function(a){this._update();var e=this.vertices.length-1,g=this.vertices[e],q=this._closed||this.vertices[e]._command===k.Commands.close,t=0;_.isUndefined(this._lengths)&&(this._lengths=[]);_.each(this.vertices,function(s,u){0>=u&&!q||s.command===k.Commands.move?(g=s,this._lengths[u]=0):(this._lengths[u]=
y(s,g,a),t+=this._lengths[u],u>=e&&q&&(g=s,this._lengths[u+1]=y(s,g,a),t+=this._lengths[u+1]),g=s)},this);this._length=t;return this},_update:function(){if(this._flagVertices){var e=this.vertices.length-1,g;g=a(this._beginning*e);e=a(this._ending*e);this._vertices.length=0;for(var q=g;q<e+1;q++)g=this.vertices[q],this._vertices.push(g);this._automatic&&this.plot()}k.Shape.prototype._update.call(this);return this},flagReset:function(){this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=
this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1;k.Shape.prototype.flagReset.call(this);return this}});q.MakeObservable(q.prototype)})(Two);
(function(k){var y=Math.min,s=Math.max,t=k.Group=function(){k.Shape.call(this,!0);this._renderer.type="group";this.additions=[];this.subtractions=[];this.children={}};_.extend(t,{MakeObservable:function(g){var a=k.Polygon.Properties.slice(0),e=_.indexOf(a,"opacity");0<=e&&(a.splice(e,1),Object.defineProperty(g,"opacity",{get:function(){return this._opacity},set:function(a){this._opacity=a;this._flagOpacity=!0}}));k.Shape.MakeObservable(g);t.MakeGetterSetters(g,a);Object.defineProperty(g,"mask",{get:function(){return this._mask},
set:function(a){this._mask=a;this._flagMask=!0;a.clip||(a.clip=!0)}})},MakeGetterSetters:function(g,a){_.isArray(a)||(a=[a]);_.each(a,function(a){t.MakeGetterSetter(g,a)})},MakeGetterSetter:function(g,a){var e="_"+a;Object.defineProperty(g,a,{get:function(){return this[e]},set:function(g){this[e]=g;_.each(this.children,function(e){e[a]=g})}})}});_.extend(t.prototype,k.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,
_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(g){g=g||this.parent;var a=new t;g.add(a);_.map(this.children,function(e){return e.clone(a)});a.translation.copy(this.translation);a.rotation=this.rotation;a.scale=this.scale;return a},toObject:function(){var g={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};_.each(this.children,function(a,e){g.children[e]=a.toObject()},this);
return g},corner:function(){var g=this.getBoundingClientRect(!0),a={x:g.left,y:g.top};_.each(this.children,function(e){e.translation.subSelf(a)});return this},center:function(){var g=this.getBoundingClientRect(!0);g.centroid={x:g.left+g.width/2,y:g.top+g.height/2};_.each(this.children,function(a){a.translation.subSelf(g.centroid)});return this},getById:function(g){var a=function(e,g){if(e.id===g)return e;for(var k in e.children){var m=a(e.children[k],g);if(m)return m}};return a(this,g)||null},getByClassName:function(g){var a=
[],e=function(g,k){-1!=g.classList.indexOf(k)&&a.push(g);for(var m in g.children)e(g.children[m],k);return a};return e(this,g)},getByType:function(g){var a=[],e=function(g,l){for(var m in g.children)g.children[m]instanceof l?a.push(g.children[m]):g.children[m]instanceof k.Group&&e(g.children[m],l);return a};return e(this,g)},add:function(g){var a=this.children,e=this.additions,k,l,m;_.isArray(g)||(g=_.toArray(arguments));_.each(g,function(g){g&&(k=g.id,l=g.parent,_.isUndefined(a[k])&&(l&&(delete l.children[k],
m=_.indexOf(l.additions,k),0<=m&&l.additions.splice(m,1)),a[k]=g,g.parent=this,e.push(k),this._flagAdditions=!0))},this);return this},remove:function(g){var a=this.children,e=this.parent,k=this.subtractions,l,m,s;if(0>=arguments.length&&e)return e.remove(this),this;_.isArray(g)||(g=_.toArray(arguments));_.each(g,function(e){l=e.id;m=e.parent;l in a&&(delete a[l],delete e.parent,s=_.indexOf(m.additions,l),0<=s&&m.additions.splice(s,1),k.push(l),this._flagSubtractions=!0)},this);return this},getBoundingClientRect:function(){var g;
this._update(!0);var a=Infinity,e=-Infinity,k=Infinity,l=-Infinity;_.each(this.children,function(m){g=m.getBoundingClientRect();_.isNumber(g.top)&&(_.isNumber(g.left)&&_.isNumber(g.right)&&_.isNumber(g.bottom))&&(k=y(g.top,k),a=y(g.left,a),e=s(g.right,e),l=s(g.bottom,l))},this);return{top:k,left:a,right:e,bottom:l,width:e-a,height:l-k}},noFill:function(){_.each(this.children,function(g){g.noFill()});return this},noStroke:function(){_.each(this.children,function(g){g.noStroke()});return this},subdivide:function(){var g=
arguments;_.each(this.children,function(a){a.subdivide.apply(a,g)});return this},flagReset:function(){this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1);this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1);this._flagMask=this._flagOpacity=!1;k.Shape.prototype.flagReset.call(this);return this}});t.MakeObservable(t.prototype)})(Two);
